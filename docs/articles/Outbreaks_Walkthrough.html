<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{sitrep} outbreaks template vignette • sitrep</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="{sitrep} outbreaks template vignette">
<meta property="og:description" content="sitrep">
<meta property="og:image" content="https://r4epi.github.io/sitrep/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149766533-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149766533-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sitrep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="https://r4epis.netlify.com" class="external-link">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Background.html">Origin Story</a>
    </li>
    <li>
      <a href="../articles/Outbreaks_Walkthrough.html">{sitrep} outbreaks template vignette</a>
    </li>
    <li>
      <a href="../articles/Surveys_Walkthrough.html">{sitrep} surveys template vignette</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/R4EPI/sitrep" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><link href="Outbreaks_Walkthrough_files/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<link href="Outbreaks_Walkthrough_files/tabwid-1.0.0/scrool.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>{sitrep} outbreaks template vignette</h1>
            <h3 data-toc-skip class="subtitle">A guided example of how
to use the R Markdown template to produce a situation report</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/R4EPI/sitrep/blob/HEAD/vignettes/Outbreaks_Walkthrough.Rmd" class="external-link"><code>vignettes/Outbreaks_Walkthrough.Rmd</code></a></small>
      <div class="hidden name"><code>Outbreaks_Walkthrough.Rmd</code></div>

    </div>

    
    
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>This page demonstrate use of the {sitrep} R Markdown template for
analysis of an outbreak of Acute Jaundice Syndrome (AJS), using data
from an outbreak in Am Timan, Chad. <em>This case study uses data that
is not standardized with the MSF data dictionary, and so reflects a
challenging use case.</em></p>
<div class="section level4">
<h4 id="ajshev-outbreak-in-am-timan-chad-2016-2017">AJS/HEV outbreak in Am Timan, Chad (2016-2017)<a class="anchor" aria-label="anchor" href="#ajshev-outbreak-in-am-timan-chad-2016-2017"></a>
</h4>
<p>We will be using data and examples from a real outbreak of Hepatitis
E virus (HEV) infection which occurred in the Chadian town of Am Timan
between October 2016 and April 2017</p>
<p><em>DISCLAIMER: The real data from the outbreak has been used for the
training materials linked to the outbreak templates of the R4epis
project. The Chadian Ministry of Health (MoH) has approved the use of
this data for training purposes. Please note, that some data has been
adapted in order to best achieve training objectives. Also, the GPS
coordinates included in the dataset do not correspond to real cases
identified during this outbreak. They have been generated exclusively
for training purposes.</em></p>
<p>In early September 2016, a cluster of severely ill pregnant women
with jaundice was detected at the Am Timan Hospital in the maternity
ward. Following rapid tests conducted in Am Timan and confirmatory
testing in the Netherlands, this was confirmed as due to HEV infection.
Thus the MoH and MSF outbreak response was activated.</p>
<p>The response consisted of four components:</p>
<ol style="list-style-type: decimal">
<li>active community based surveillance (CBS)<br>
</li>
<li>clinical assessment and management of ill cases at the
hospital<br>
</li>
<li>water chlorination activities at most water points in the town<br>
</li>
<li>hygiene promotion</li>
</ol>
<p><strong>The outbreak linelist data was combined data from the active
CBS data and the clinical data from the hospital.</strong> The CBS
functioned with community health workers visiting all households in the
town every two weeks and actively searching for people with Acute
Jaundice Syndrome (AJS). For this group of persons (suspected cases),
only those that were visibly ill or that were pregnant were referred to
the hospital for clinical assessment and admission if required. Persons
that self-reported to the hospital or that arrived after referral would
undergo a clinical assessment and a rapid test for HEV for diagnosis.
Thus only for people assessed at the hospital were we able to capture a
confirmed case status.</p>
<p>For the duration of the outbreak we detected 1193 suspected cases,
100 confirmed cases and discarded 150 cases with AJS who were not
positive for HEV infection.</p>
<p><a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0188240" class="external-link">Link
to Spina and Lenglet <em>et al.</em> 2017</a></p>
</div>
</div>
<div class="section level3">
<h3 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<div class="section level4">
<h4 id="software-installations">Software installations<a class="anchor" aria-label="anchor" href="#software-installations"></a>
</h4>
<p>To begin using R, ensure you have the following free software
installed:</p>
<ol style="list-style-type: decimal">
<li>
<a href="https://cran.r-project.org/bin/windows/base/" class="external-link">R</a> (the
free statistical software)</li>
<li>
<a href="https://www.rstudio.com/products/rstudio/download/#download" class="external-link">RStudio</a>
(the free user interface)</li>
<li>
<a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">RTools</a>
(only needed for Windows computers)</li>
</ol>
<p>If you are a new R user, we highly suggest doing the following before
beginning to use these templates:</p>
<ol style="list-style-type: decimal">
<li>Complete our 5 free online introductory <a href="www.appliedepi.org/tutorial">R tutorials</a>. To begin, create
your free Applied Epi account, as explained in the linked page</li>
<li>Review the <a href="https://epirhandbook.com/en/r-basics.html#r-basics" class="external-link">R basics
chapter</a> of our Epidemiologist R Handbook</li>
<li>Review the <a href="https://epirhandbook.com/en/reports-with-r-markdown.html" class="external-link">Reports
with R Markdown chapter</a> of the Epidemiologist R Handbook</li>
</ol>
<p>Once you have an understanding of how R and RStudio work, know how to
run basic commands, have practiced running R code on your computer, and
have read about R Markdown reports, then you are ready to use our
{sitrep} R Markdown templates to produce situation reports.</p>
</div>
<div class="section level4">
<h4 id="install-the-sitrep-r-package">Install the {sitrep} R package<a class="anchor" aria-label="anchor" href="#install-the-sitrep-r-package"></a>
</h4>
<p>To access the templates, you must install the “sitrep” R package. R
packages are often written in text with curly brackets, like this:
{sitrep}</p>
<ol style="list-style-type: decimal">
<li>Open RStudio</li>
<li>Run the following command in the R Console pane:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install the {remotes} package, which is used to install the {sitrep} package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Now run this command, also in the R Console pane. The {sitrep}
package is currently available from a location on Github, a site to
store and share code.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use {remotes} to install {sitrep} from Github</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"R4EPI/sitrep"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="download-the-solution-to-follow-along">Download the solution to follow along<a class="anchor" aria-label="anchor" href="#download-the-solution-to-follow-along"></a>
</h4>
<p>We suggest that you <a href="/public_data/Final_casestudy_AJS_template.Rmd">Download the
“solution” R Markdown template</a> used in this vignette, in order to
follow-along step-by-step.</p>
</div>
<div class="section level4">
<h4 id="open-a-new-rstudio-project">Open a new RStudio project<a class="anchor" aria-label="anchor" href="#open-a-new-rstudio-project"></a>
</h4>
<p>Working in R is best done from within an “RStudio project” that
contains all the datasets, R scripts, and outputs for a single
analytical project.</p>
<p>You should review the Epidemiologist R Handbook chapters on <a href="https://epirhandbook.com/en/r-projects.html" class="external-link">RStudio projects</a>.
Below are brief instructions on how to create a new RStudio project:</p>
<blockquote>
<p>Select <em>File -&gt; New Project</em> from the top RStudio menu.</p>
</blockquote>
<blockquote>
<p>Creating a new R project will create:</p>
</blockquote>
<blockquote>
<ul>
<li>A new project directory (folder)<br>
</li>
<li>A R project file (.Rproj) in the project folder that serves as a
shortcut to open the project via RStudio</li>
</ul>
</blockquote>
<blockquote>
<p>Note:</p>
</blockquote>
<blockquote>
<ul>
<li>You can make sub-folders for data, scripts, etc.<br>
</li>
<li>All files produced by R scripts saved to the project will also save
into the project folder<br>
</li>
<li>Navigate and open project files, such as scripts, using the Files
tab of the lower-right RStudio pane.<br>
*For an RMarkdown to produce the final report correctly, you must have
read/write permissions for the location of the R project folder. On an
MSF computer this is generally the c:/temp folder.</li>
</ul>
</blockquote>
<p>One significant benefit of working within an R project is that all
associated files (datasets, etc.) are located within the same folder.
Thus, to send the project to someone else, <strong>simply zip the folder
and send</strong>. All files referenced in the scripts are included and
if you utilized the {here} package, no file paths are unique to your
computer.</p>
</div>
</div>
<div class="section level3">
<h3 id="open-a-sitrep-r-markdown-template">Open a {sitrep} R Markdown template<a class="anchor" aria-label="anchor" href="#open-a-sitrep-r-markdown-template"></a>
</h3>
<p>For this vignette, you will need to open the template for “AJS”
(Acute Jaundice Syndrome). See the instructions and GIF below.</p>
<div class="section level4">
<h4 id="opening-a-template">Opening a template<a class="anchor" aria-label="anchor" href="#opening-a-template"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Ensure you have installed the {sitrep} package as detailed
above<br>
</li>
<li>Go to the File menu, select “New File”, and select “R
Markdown”<br>
</li>
<li>In the pop-up window, select “From template”</li>
<li>From the list of templates, select “AJS Outbreak Report” - the
template will open in RStudio<br>
</li>
<li>Go to File, “Save”, and write a name for this R Markdown script;
save it into your RStudio Project folder</li>
</ol>
<p><img src="images/opening_template.gif" width="549" alt="This above GIF shows how to open one of the templates, after having installed the {sitrep} R package">
### Folder structure</p>
<p>It is highly recommended that you store your R Markdown script and
any data used in the same folder (the RStudio project). You should
review the Epidemiologist R Handbook chapters on <a href="https://epirhandbook.com/en/r-projects.html" class="external-link">RStudio
projects</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="become-familiar-with-the-template">Become familiar with the template<a class="anchor" aria-label="anchor" href="#become-familiar-with-the-template"></a>
</h3>
<div class="section level4">
<h4 id="header">Header<a class="anchor" aria-label="anchor" href="#header"></a>
</h4>
<p>The very top of the R Markdown template consists of a header
surrounded by <code>---</code> lines. This is called the “YAML” header,
in which you can edit the title of your document. The other settings in
the header define the default document type produced (Microsoft Word)
when the RMarkdown is “knit”.</p>
<p><img src="images/AJS_Intro.PNG"></p>
</div>
<div class="section level4">
<h4 id="introduction-to-the-template">Introduction to the template<a class="anchor" aria-label="anchor" href="#introduction-to-the-template"></a>
</h4>
<p>This text just below the header is for your reference only. If left
alone it will appear at the beginning of your report, so you should
replace it with a more relevant introduction. Any text you write here
can be formatted with <em>italics</em>, <strong>bold</strong>, bullets,
numbers, tables, and in-line code. See this <a href="/images/rmarkdown_cheatsheet_2.0.pdf">RMarkdown cheatsheet</a> for
tips on formatting.</p>
</div>
<div class="section level4">
<h4 id="explanatory-text">Explanatory text<a class="anchor" aria-label="anchor" href="#explanatory-text"></a>
</h4>
<p>Green text located between these special characters
(<code>&lt;!--</code> and <code>--&gt;</code>), is for your information
only. This text will <strong>not</strong> appear in the final Word
document report.</p>
</div>
</div>
<div class="section level3">
<h3 id="installing-and-loading-packages">Installing and loading packages<a class="anchor" aria-label="anchor" href="#installing-and-loading-packages"></a>
</h3>
<p><strong>The first code chunk, <code>setup</code>, is very important
and must be kept.</strong> When the final report is knit, this chunk
will run without producing any output, but it is required for the
template to work correctly.</p>
<p>This <code>setup</code> code chunk does the following:</p>
<ul>
<li><p>Set default settings for tables such as size, error handling, and
display of missing values</p></li>
<li><p>Run a command using the {pacman} package to install and load the
R packages that are used in this template.</p></li>
<li><p>Set default text size in graphic plots</p></li>
<li><p>Establish visual theme settings for epidemic curve plots</p></li>
</ul>
<div class="section level4">
<h4 id="about-the-packages-used-in-this-template">About the packages used in this template<a class="anchor" aria-label="anchor" href="#about-the-packages-used-in-this-template"></a>
</h4>
<div class="section level5">
<h5 id="generic-packages">Generic packages<a class="anchor" aria-label="anchor" href="#generic-packages"></a>
</h5>
<table class="table">
<colgroup>
<col width="14%">
<col width="85%">
</colgroup>
<thead><tr class="header">
<th>R package</th>
<th>Use</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>{knitr}</td>
<td>to create the output document (pdf, doc, html)</td>
</tr>
<tr class="even">
<td>{here}</td>
<td>to locate files within the RStudio project</td>
</tr>
<tr class="odd">
<td>{rio}</td>
<td>to import data from various formats (csv, xlsx, tsv, etc.)</td>
</tr>
<tr class="even">
<td>{dplyr}</td>
<td>to clean and handle data</td>
</tr>
<tr class="odd">
<td>{forcats}</td>
<td>to clean the data and create ordinal columns (“factors”)</td>
</tr>
<tr class="even">
<td>{stringr}</td>
<td>to clean and handle text/characters (known as “strings”)</td>
</tr>
<tr class="odd">
<td>{ggplot2}</td>
<td>to visualise your data in plots</td>
</tr>
<tr class="even">
<td>{lubridate}</td>
<td>to handle dates and times</td>
</tr>
<tr class="odd">
<td>{gtsummary}</td>
<td>to produce summary tables</td>
</tr>
<tr class="even">
<td>{flextable}</td>
<td>to format summary tables for presentation</td>
</tr>
<tr class="odd">
<td>{purrr}</td>
<td>to iterate processes - repeating the same process many times with
small variations</td>
</tr>
</tbody>
</table>
</div>
<div class="section level5">
<h5 id="more-epidemiology-specific-packages">More epidemiology-specific packages<a class="anchor" aria-label="anchor" href="#more-epidemiology-specific-packages"></a>
</h5>
<table class="table">
<colgroup>
<col width="24%">
<col width="75%">
</colgroup>
<thead><tr class="header">
<th>R package</th>
<th>Use</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>{sitrep}</td>
<td>includes the templates and functions useful for field
epidemiology</td>
</tr>
<tr class="even">
<td>{slider}</td>
<td>to calculate moving averages</td>
</tr>
<tr class="odd">
<td>{parsedate}</td>
<td>to interpret “messy” date formats</td>
</tr>
<tr class="even">
<td>{matchmaker}</td>
<td>to clean data using data dictionaries</td>
</tr>
<tr class="odd">
<td>{tsibble}</td>
<td>to conduct time-series analysis, and produce epidemiological
weeks</td>
</tr>
<tr class="even">
<td>{sf} and {ggspatial}</td>
<td>to produce maps</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level3">
<h3 id="define-the-report-settings">Define the report settings<a class="anchor" aria-label="anchor" href="#define-the-report-settings"></a>
</h3>
<p>Typically, near the top of a report you establish settings that will
be used throughout the report.</p>
<div class="section level4">
<h4 id="define-the-reporting-date">Define the reporting date<a class="anchor" aria-label="anchor" href="#define-the-reporting-date"></a>
</h4>
<p>This chunk continues the set-up of time-related parameters. There are
potentially two items to edit in this chunk:</p>
<ol style="list-style-type: decimal">
<li>Set the <code>reporting_date</code> object to the latest date for
data to be used in your report. This value is used in later code chunks,
for example when producing epidemic curves. Follow the format in the
code: <code>ymd("YYYY-MM-DD")</code>
</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reporting_date</span> <span class="op">&lt;-</span> <span class="fu">ymd</span><span class="op">(</span><span class="st">"2018-04-23"</span><span class="op">)</span></span></code></pre></div>
<p><em>If you want to use the current date (as per your computer) which
will be automatically updated, place <code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date()</a></code> within the
<code>ymd()</code> function, like this: <code>ymd(Sys.Date())</code>. Or
try, <code>ymd(Sys.Date()-3)</code>.</em></p>
</div>
<div class="section level4">
<h4 id="define-the-current-week">Define the current week<a class="anchor" aria-label="anchor" href="#define-the-current-week"></a>
</h4>
<ol start="2" style="list-style-type: decimal">
<li>Adjust whether your epidemiological weeks begin on Mondays, Sundays,
etc. The second command in this code chunk creates the object
<code>reporting_week</code> using the <code>report_date</code> object
from the above command.</li>
</ol>
<p><em>The only part of this command that you may need to change is the
number near the end</em>. Use <code>1</code> for Mondays, or
<code>7</code> for Sundays.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reporting_week</span> <span class="op">&lt;-</span> <span class="fu">tsibble</span><span class="fu">::</span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/year-week.html" class="external-link">yearweek</a></span><span class="op">(</span><span class="va">reporting_date</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="set-plot-defaults">Set plot defaults<a class="anchor" aria-label="anchor" href="#set-plot-defaults"></a>
</h4>
<p>In this next chunk, you define the labels that will be used in
epidemic curve plots. This code should not need any adjustment.</p>
<p>You may notice that the <code>subtitle =</code> label uses the object
<code>reporting_week</code> in curly braces - this means that the value
of <code>reporting_week</code> defined in the previous chunk will show
in its place.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## sets the labels in ggplot for the epicurves</span></span>
<span><span class="va">epicurve_labels</span> <span class="op">&lt;-</span> <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Calendar week"</span>, </span>
<span>                        y <span class="op">=</span> <span class="st">"Cases (n)"</span>, </span>
<span>                        title <span class="op">=</span> <span class="st">"Cases by week of onset"</span>,</span>
<span>                        subtitle <span class="op">=</span> <span class="fu">str_glue</span><span class="op">(</span><span class="st">"Source: MSF data from {reporting_week}"</span><span class="op">)</span></span>
<span>                       <span class="op">)</span> </span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="import-data">Import data<a class="anchor" aria-label="anchor" href="#import-data"></a>
</h3>
<p>This {sitrep} template offers three (3) dataset options:</p>
<ol style="list-style-type: decimal">
<li>Generating a fake linelist for practice<br>
</li>
<li>Using standardised DHIS2 data<br>
</li>
<li>Using non-standard data</li>
</ol>
<p>Ensure that you use the code chunks for your situation, and either
delete or commend out (using #) the code for the other scenarios.</p>
<p><img src="images/AJS_Data_Import.png" width="549"></p>
<div class="section level4">
<h4 id="import-data-for-this-vignette">Import data for this vignette<a class="anchor" aria-label="anchor" href="#import-data-for-this-vignette"></a>
</h4>
<p><strong>This vignette will demonstrate using <em>non-standard
data</em></strong>.</p>
<p>The AJS linelist spreadsheet is named “AJS_Am_Timan.xlsx”, and is
stored in the {sitrep} R package. We created the function
<code><a href="../reference/download_outbreak_linelist.html">download_outbreak_linelist()</a></code> which will copy this file into
a location of your choice on your computer.</p>
<p>Run the commands below. Then look for a pop-up window and use it to
select your RStudio project folder as the file destination (the pop-up
may appear <em>behind</em> RStudio out-of-sight).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the sitrep package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R4EPI/sitrep" class="external-link">sitrep</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run the command below as it is (empty parentheses).</span></span>
<span><span class="co"># Look for a pop-up window, and select your RStudio project as the file destination</span></span>
<span><span class="fu"><a href="../reference/download_outbreak_linelist.html">download_outbreak_linelist</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>For this vignette, <strong>comment out (using #) or delete the
<code>read_fake_data</code>, <code>read_DHIS_data</code>, and
<code>prep_DHIS_data</code> chunks</strong>, as they are not necessary
and will cause errors.</p>
<p>A successful import should result in a dataframe object named
<code>linelist_raw</code> in your RStudio Environment pane, consisting
of 1447 observations and 122 columns.</p>
<p><img src="images/linelist_raw_imported.PNG" width="549"></p>
</div>
<div class="section level4">
<h4 id="import-the-population-data-into-r">Import the population data into R<a class="anchor" aria-label="anchor" href="#import-the-population-data-into-r"></a>
</h4>
<p>Now that the linelist data are saved in your RStudio project, you can
import them into R using <code>import()</code>, as described in the
Epidemiologist R Handbook’s <a href="https://epirhandbook.com/en/import-and-export.html" class="external-link">Import and
export</a> chapter.</p>
<p>To import a specific sheet from an xlsx spreadsheet, use the
<code>which =</code> argument as shown below. You can also use the
<code>na =</code> argument to specify a value that should be converted
to <code>NA</code> across the entire sheet (e.g. 99 or “Missing”, or “”
which represents an empty space).</p>
<p>Th example command below imports an Excel spreadsheet called
“AJS_AmTiman.xlsx” which is not password protected, and is stored in the
RStudio project you are using for this analysis. The
<code>which =</code> argument of <code>import()</code> specifies that
the sheet “linelist” should be imported. You would edit this command as
appropriate for your situation.</p>
<p>Note: If you saved the data into a subfolder of your RStudio project,
you would need to also use the <code>here()</code> function, as
described in the Epidemiologist R Handbook’s <a href="https://epirhandbook.com/en/import-and-export.html" class="external-link">Import and
export</a> chapter.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># example code for importing an Excel file saved in RStudio project</span></span>
<span></span>
<span><span class="co"># Import the linelist from your RStudio project (top folder)</span></span>
<span><span class="va">linelist_raw</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"AJS_AmTiman.xlsx"</span>, which <span class="op">=</span> <span class="st">"linelist"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import from a "data" subfolder of the RStudio project</span></span>
<span><span class="co">#linelist_raw &lt;- import(here("data", "AJS_AmTiman.xlsx"), which = "linelist")</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="align-columns-with-data-dictionary">Align columns with data dictionary<a class="anchor" aria-label="anchor" href="#align-columns-with-data-dictionary"></a>
</h3>
<p>As in this vignette, if your dataset is not initially aligned with
the MSF data dictionary, the column names and values must be
standardised. This is because later parts of the template expect certain
column names and values.</p>
<p><strong>This process can take some time</strong> and requires looking
back-and-forth between your dataset, RStudio, and the MSF data
dictionary. In this vignette, here are the steps taken:</p>
<div class="section level4">
<h4 id="review-the-msf-data-dictionary">Review the MSF data dictionary<a class="anchor" aria-label="anchor" href="#review-the-msf-data-dictionary"></a>
</h4>
<p>Uncomment and run this command, found in the
<code>prep_nonDHIS_data</code> chunk, to view the MSF data dictionary
for the specific disease (“AJS” in this example).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Creates object linelist_dict using the msf_dict function from the sitrep package</span></span>
<span><span class="va">linelist_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/msf_dict.html">msf_dict</a></span><span class="op">(</span><span class="st">"AJS"</span>, compact <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">option_code</span>, <span class="va">option_name</span>, <span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The dataframe <code>linelist_dict</code> should appear in your
Environment pane. You can view the data dictionary by clicking on
<code>linelist_dict</code> in the Environment pane, or running the
command <code>View(linelist_dict)</code> (note capital V).</p>
<p><img src="images/AJS_Data_Dictionary.png" width="549"></p>
</div>
<div class="section level4">
<h4 id="clean-the-column-names">Clean the column names<a class="anchor" aria-label="anchor" href="#clean-the-column-names"></a>
</h4>
<p>These steps standardize how your column names are written, such as
changing spaces and dots to underscores (“_“). <strong>Uncomment these
lines of code in the <code>prep_nonDHIS_data</code> chunk</strong>.</p>
<p><strong>First, make a copy of the dataframe <code>linelist_raw</code>
but with a new name: <code>linelist_cleaned</code>.</strong><br>
Throughout the template you will modify and improve this
<code>linelist_cleaned</code> dataframe. However, you can always return
to the <code>linelist_raw</code> version for reference.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## make a copy of your orginal dataset and name it linelist_cleaned</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_raw</span></span></code></pre></div>
<p><strong>Second, use the <code>clean_names()</code> function</strong>
from the {janitor} package to fix any column names with non-standard
syntax.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="match-your-datasets-columns-to-msfs-ajs-data-dictionary">Match your dataset’s columns to MSF’s AJS data dictionary<a class="anchor" aria-label="anchor" href="#match-your-datasets-columns-to-msfs-ajs-data-dictionary"></a>
</h4>
<p>Standardized column names are required for this template to work
smoothly, and the column names in the Am Timan linelist do not align
with the names this template expects.</p>
<p>We need to change many column names, so we have developed a special
function to help map our columns to the expected column names. The
template also offers code that you can un-comment if there are only a
few column names to change.<br>
This is done by un-commenting and running a command found in near the
end of the chunk <code>prep_nonDHIS_data</code>. We run the command
<code><a href="../reference/msf_dict.html">msf_dict_rename_helper()</a></code> with “AJS” to get the correct
helper for this template.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/msf_dict.html">msf_dict_rename_helper</a></span><span class="op">(</span><span class="st">"AJS"</span><span class="op">)</span></span></code></pre></div>
<p>Running this command copies a block of code text to our clipboard.
Now, <em>paste</em> from your clipboard into the template in the bottom
of the code chunk. For the AJS template, the code that is pasted will
look like the code below. This code uses the function
<code>rename()</code> to change column names.</p>
<p><em>Be sure to paste the AJS rename helper code into an existing R
code chunk (e.g. the bottom of <code>prep_nonDHIS_data</code>), not into
the white space of the RMarkdown script.</em></p>
<p><img src="images/Variable_Helper_Paste_Revised.gif" width="549"></p>
<div class="section level5">
<h5 id="complete-the-mapping-of-column-names">Complete the mapping of column names<a class="anchor" aria-label="anchor" href="#complete-the-mapping-of-column-names"></a>
</h5>
<p>The columns will be in alphabetical order, sorted by if the appear in
the template (REQUIRED) or not (optional).</p>
<p>Some columns—such as lab results or symptoms—are listed as REQUIRED,
but are not absolutely necessary for the template to run. If you do not
have a column and are unsure if it’s necessary, do a search in the
template to see if it’s marked as OPTIONAL in the code chunk.</p>
<p>To the right of each equals sign, and before each comma, type the
<em>exact</em> names of the columns from your dataset that correspond to
the expected MSF data dictionary columns on the left. The last
un-commented line should not have a comma at the end.</p>
<p>Be sure to comment (#, ctrl + shift + c) out the lines of each data
dictionary column in the helper that is not present in your dataset!</p>
<p><img src="images/AJS_Variable_Names.gif" width="549"></p>
<p>If you see this error:<br><code>Error in is_symbol(expr) : argument "expr" is missing, with no default</code><br>
then you likely forgot to comment (#) the line for a column you did not
use.</p>
<p>And now you can see the result:</p>
<p><img src="images/AJS_Rename_Variables_Proof.png" width="549"></p>
<p>Below is the code for the column assignments used in this case study
walk-through. You can copy or reference this when building your template
for this vignette.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Below are the column assignments used in this case study example</span></span>
<span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="fu">rename</span><span class="op">(</span><span class="va">linelist_cleaned</span>,</span>
<span>  <span class="co"># age_days                          =   , # INTEGER_POSITIVE  (Dataset only has years)</span></span>
<span>  <span class="co"># age_months                        =   , # INTEGER_POSITIVE  (Dataset only has years)</span></span>
<span>  age_years                         <span class="op">=</span> <span class="va">age</span>, <span class="co"># INTEGER_POSITIVE  (REQUIRED)</span></span>
<span>  bleeding                          <span class="op">=</span> <span class="va">medbleeding</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  case_number                       <span class="op">=</span> <span class="va">hevid</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  chikungunya_onyongnyong           <span class="op">=</span> <span class="va">chik</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  <span class="co"># convulsions                       =   , # BOOLEAN           (Not in dataset)</span></span>
<span>  date_of_consultation_admission    <span class="op">=</span> <span class="va">dtmedical</span>, <span class="co"># DATE              (REQUIRED)</span></span>
<span>  <span class="co"># date_of_exit                      =   , # DATE              (Not in dataset)</span></span>
<span>  date_of_onset                     <span class="op">=</span> <span class="va">dtjaundice</span>, <span class="co"># DATE              (REQUIRED)</span></span>
<span>  dengue                            <span class="op">=</span> <span class="va">dengue</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  <span class="co"># dengue_rdt                        =   , # TEXT              (Not in dataset)</span></span>
<span>  diarrhoea                         <span class="op">=</span> <span class="va">meddiar</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  <span class="co"># ebola_marburg                     =   , # TEXT              (Not in dataset)</span></span>
<span>  epigastric_pain_heartburn         <span class="op">=</span> <span class="va">medepigastric</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  exit_status                       <span class="op">=</span> <span class="va">outcomehp</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  fever                             <span class="op">=</span> <span class="va">medfever</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  generalized_itch                  <span class="op">=</span> <span class="va">meditching</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  headache                          <span class="op">=</span> <span class="va">medheadache</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  hep_b_rdt                         <span class="op">=</span> <span class="va">medhepb</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  hep_c_rdt                         <span class="op">=</span> <span class="va">medhepc</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  hep_e_rdt                         <span class="op">=</span> <span class="va">medhevrdt</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  <span class="co"># history_of_fever                  =   , # BOOLEAN           (Not in dataset)</span></span>
<span>  joint_pains                       <span class="op">=</span> <span class="va">medarthralgia</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  <span class="co"># lassa_fever                       =   , # TEXT              (Not in dataset)</span></span>
<span>  <span class="co"># malaria_blood_film                =   , # TEXT              (Not in dataset)</span></span>
<span>  malaria_rdt_at_admission          <span class="op">=</span> <span class="va">medmalrdt</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  mental_state                      <span class="op">=</span> <span class="va">medmental</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  nausea_anorexia                   <span class="op">=</span> <span class="va">mednausea</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  other_arthropod_transmitted_virus <span class="op">=</span> <span class="va">arbovpcr</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  other_cases_in_hh                 <span class="op">=</span> <span class="va">medothhhajs</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  <span class="co"># other_pathogen                    =   , # TEXT              (Not in dataset)</span></span>
<span>  other_symptoms                    <span class="op">=</span> <span class="va">medother</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  patient_facility_type             <span class="op">=</span> <span class="va">hospitalised</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  patient_origin                    <span class="op">=</span> <span class="va">quartier</span>, <span class="co"># ORG UNIT          (REQUIRED)</span></span>
<span>  sex                               <span class="op">=</span> <span class="va">sex</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  test_hepatitis_a                  <span class="op">=</span> <span class="va">medhavelisa</span>, <span class="co"># TEXT          (REQUIRED)</span></span>
<span>  test_hepatitis_b                  <span class="op">=</span> <span class="va">medhbvelisa</span>, <span class="co"># TEXT          (REQUIRED)</span></span>
<span>  test_hepatitis_c                  <span class="op">=</span> <span class="va">medhcvelisa</span>, <span class="co"># TEXT          (REQUIRED)</span></span>
<span>  test_hepatitis_e_genotype         <span class="op">=</span> <span class="va">hevgenotype</span>, <span class="co"># TEXT          (REQUIRED)</span></span>
<span>  <span class="co"># test_hepatitis_e_igg              =   , # TEXT              (In same column as elisa result)</span></span>
<span>  test_hepatitis_e_igm              <span class="op">=</span> <span class="va">hevrecent</span>, <span class="co"># TEXT          (REQUIRED)</span></span>
<span>  test_hepatitis_e_virus            <span class="op">=</span> <span class="va">medhevelisa</span>, <span class="co"># TEXT          (REQUIRED)</span></span>
<span>  <span class="co"># time_to_death                     =   , # TEXT              (Not in dataset)</span></span>
<span>  <span class="co"># typhoid                           =   , # TEXT              (Not in dataset)</span></span>
<span>  vomiting                          <span class="op">=</span> <span class="va">medvomit</span>, <span class="co"># BOOLEAN           (REQUIRED)</span></span>
<span>  <span class="co"># water_source                      =   , # TEXT              !(Split across many columns)</span></span>
<span>  yellow_fever                      <span class="op">=</span> <span class="va">yf</span>, <span class="co"># TEXT              (REQUIRED)</span></span>
<span>  <span class="co"># arrival_date_in_area_if_3m        =   , # DATE              (optional)</span></span>
<span>  date_lab_sample_taken             <span class="op">=</span> <span class="va">medblooddt</span>, <span class="co"># DATE              (optional)</span></span>
<span>  <span class="co"># date_of_last_vaccination          =   , # DATE              (optional)</span></span>
<span>  <span class="co"># delivery_event                    =   , # TRUE_ONLY         (optional)</span></span>
<span>  detected_by                       <span class="op">=</span> <span class="va">referredby</span>, <span class="co"># TEXT              (optional)</span></span>
<span>  <span class="co"># event_file_type                   =   , # TEXT              (optional)</span></span>
<span>  <span class="co"># ever_received_hepatitis_e_vaccine =   , # TEXT              (optional)</span></span>
<span>  <span class="co"># foetus_alive_at_admission         =   , # TEXT              (optional)</span></span>
<span>  <span class="co"># lab_comments                      =   , # TEXT              (optional)</span></span>
<span>  <span class="co"># msf_involvement                   =   , # TEXT              (optional)</span></span>
<span>  patient_origin_free_text          <span class="op">=</span> <span class="va">block</span>, <span class="co"># TEXT              (optional)</span></span>
<span>  pregnancy_outcome_at_exit         <span class="op">=</span> <span class="va">medppoutcome</span>, <span class="co"># TEXT              (optional)</span></span>
<span>  pregnant                          <span class="op">=</span> <span class="va">medpreg</span>, <span class="co"># TEXT              (optional)</span></span>
<span>  <span class="co"># recent_travel                     =   , # BOOLEAN           (optional)</span></span>
<span>  <span class="co"># residential_status_brief          =   , # TEXT              (optional)</span></span>
<span>  <span class="co"># traditional_medicine_details      =   , # TEXT              (optional)</span></span>
<span>  <span class="co"># traditional_medicines             =   , # BOOLEAN           (optional)</span></span>
<span>  treatment_facility_site           <span class="op">=</span> <span class="va">hpid</span>, <span class="co"># TEXT              (optional)</span></span>
<span>  <span class="co"># treatment_location                =   , # ORGANISATION_UNIT (optional)</span></span>
<span>  trimester                         <span class="op">=</span> <span class="va">medpregtri</span> <span class="co"># TEXT              (optional)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="provide-population-counts">Provide population counts<a class="anchor" aria-label="anchor" href="#provide-population-counts"></a>
</h3>
<p>The population estimates for regions and age groups are collected in
order to calculate incidence, attack rates, and mortality rates.
<strong>The template allows several ways to provide population
estimates, but importantly, the data must be stored under specific
column names.</strong> In your real-use case, the specific age groupings
and region names in your data may differ from the examples, but the
column names must follow the expected standard.</p>
<p>You can do one of the following:</p>
<ol style="list-style-type: upper-alpha">
<li>Import a spreadsheet file with the estimates in the correct
format<br>
</li>
<li>Use the function <code><a href="../reference/epikit-exports.html">gen_population()</a></code> to derive the
estimates from proportions based on globally accepted standards<br>
</li>
<li>Use the function <code><a href="../reference/epikit-exports.html">gen_population()</a></code> to directly enter
counts</li>
</ol>
<p><img src="images/AJS_Population_Counts.png" width="549"></p>
<p><strong>For this case study, we use a spreadsheet containing
population data by quartier (stored inside the {sitrep} R
package).</strong></p>
<div class="section level4">
<h4 id="for-this-vignette">For this vignette<a class="anchor" aria-label="anchor" href="#for-this-vignette"></a>
</h4>
<p>Because the vignette data are stored within the {sitrep} package, you
can copy them to your RStudio project using the below commands. Look for
the pop-up window (it may appear behind RStudio) and assign the
destination as your RStudio project.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R4EPI/sitrep" class="external-link">sitrep</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/download_outbreak_pop.html">download_outbreak_pop</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Note the name change</strong> from the default
<code>population_data</code>, because the data we are importing is for
regions (quartiers).</p>
<p>Note also that the columns names in the spreadsheet have already been
edited to match the expected column names (“patient_origin” and
“population”).</p>
</div>
<div class="section level4">
<h4 id="import-the-population-data-into-r-1">Import the population data into R<a class="anchor" aria-label="anchor" href="#import-the-population-data-into-r-1"></a>
</h4>
<p>Now that the population data are saved in your RStudio project, you
can import them into R using <code>import()</code>, as described in the
Epidemiologist R Handbook’s <a href="https://epirhandbook.com/en/import-and-export.html" class="external-link">Import and
export</a> chapter.</p>
<p>To import a specific sheet from an xlsx spreadsheet, use the
<code>which =</code> argument as shown below. You can also use the
<code>na =</code> argument to specify a value that should be converted
to <code>NA</code> across the entire sheet (e.g. 99 or “Missing”, or “”
which represents an empty space).</p>
<p>Th example command below imports an Excel spreadsheet called
“AJS_AmTiman_population.xlsx” which is not password protected, and is
stored in the RStudio project you are using for this analysis. The
<code>which =</code> argument of <code>import()</code> specifies that
the sheet “quartier” should be imported. You would edit this command as
appropriate for your situation.</p>
<p>Note: If you saved the data into a subfolder of your RStudio project,
you would need to also use the <code>here()</code> function, as
described in the Epidemiologist R Handbook’s <a href="https://epirhandbook.com/en/import-and-export.html" class="external-link">Import and
export</a> chapter.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># example code for importing an Excel file saved in RStudio project</span></span>
<span></span>
<span><span class="co"># Import dataset from your RStudio project (top folder)</span></span>
<span><span class="va">population_data_region</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"AJS_AmTiman_population.xlsx"</span>, which <span class="op">=</span> <span class="st">"quartier"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import from a "data" subfolder of the RStudio project</span></span>
<span><span class="co">#population_data_region &lt;- import(here("data", "AJS_AmTiman_population.xlsx"), which = "quartier")</span></span></code></pre></div>
<p>Before moving on, delete or comment (#) all the code lines in the
chunk that create fake data or proportions for
<code>population_data_region</code>, <code>population_data_age</code>,
and <code>population_data_age_months</code>.</p>
<p><strong>If you choose not to complete the population estimates
section at all, delete or comment (#) all code in this section, and
expect that later sections on attack and mortality rates will not
produce output.</strong></p>
</div>
</div>
<div class="section level3">
<h3 id="provide-laboratory-testing-data">Provide laboratory testing data<a class="anchor" aria-label="anchor" href="#provide-laboratory-testing-data"></a>
</h3>
<p>In this example, laboratory testing data is already included in the
linelist dataset. Therefore, <strong>there is no need to import a
separate laboratory testing dataset</strong>.</p>
<p>In your personal use-case, if you have a separate laboratory dataset,
use the alterate code provided in the template to import and then join
that dataset to the linelist dataset. You can join them based on an ID
or case number column that is present in both datasets. For more
information about joins, see the Epidemiologist R Handbook chapter on <a href="https://epirhandbook.com/en/joining-data.html" class="external-link">Joining
data</a>.</p>
</div>
<div class="section level3">
<h3 id="browse-data">Browse data<a class="anchor" aria-label="anchor" href="#browse-data"></a>
</h3>
<p>This code chunk can be used to explore your data, but
<strong>remember to eventually comment out (#) these code lines if you
do not want these outputs in your final report</strong>.</p>
<p>View the first 10 rows of the data</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist_cleaned</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Wiew your whole dataset interactively. Remember that
<code>View</code> needs to be written with a capital <em>V</em>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">)</span></span></code></pre></div>
<p>Overview of column types and contents</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">)</span></span></code></pre></div>
<p>Gives mean, median and max values of columns, gives counts for
categorical columns, and also gives number of NAs.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">)</span></span></code></pre></div>
<p>View unique values contained in columns</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="standardize-and-clean-data">Standardize and clean data<a class="anchor" aria-label="anchor" href="#standardize-and-clean-data"></a>
</h3>
<p>Because the Am Timan linelist is not yet aligned with the MSF data
dictionary and what the template expects, there are several data
cleaning steps we must complete.</p>
<div class="section level4">
<h4 id="re-code-missing-values-from-periods---to-na-at-import">Re-code missing values from periods (.) to <code>NA</code> at
import<a class="anchor" aria-label="anchor" href="#re-code-missing-values-from-periods---to-na-at-import"></a>
</h4>
<p>Sometimes, missing values in the dataset are represented by a period
(.), or by a number such as 99. This causes problems because R expects
missing values to be coded as <code>NA</code>. For example, if missing
dates are coded as a period (.), then R gives an error because the
periods are considered character values that do not fit the expected
YYYY-MM-DD date format.</p>
<p>If you encounter a problem like this, modify the general import
command in the <code>read_nonDHIS_data</code> chunk of the template to
include the argument <code>na =</code> within the <code>import()</code>
command. Writing <code>na = "."</code> specifies a period as the value
in the Excel sheet that R will consider to be “missing”. Alternatively,
your scenario may require you to write <code>na = 99</code> (no
quotation marks, as 99 is a number). As the data are re-imported, all
cells with that value are now changed to <code>NA</code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># An example of a revised import command (don't forget the comma between arguments!)</span></span>
<span><span class="va">linelist_raw</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"AJS_AmTiman.xlsx"</span>, which <span class="op">=</span> <span class="st">"linelist"</span>, na <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="drop-ineligible-observations">Drop ineligible observations<a class="anchor" aria-label="anchor" href="#drop-ineligible-observations"></a>
</h4>
<p>The next code chunk in the script, <code>remove_unused_data</code>,
drops observations with missing <code>case_number</code> or
<code>date_of_consultation_admission</code>. Because the Am Timan
dataset contains observations for patients seen in the community and at
the hospital, these criteria may not be relevant.</p>
<p>We can check, using the code below, and see that of the 1447
observations, there are 0 missing <code>case_number</code> or
<code>dateentry</code>, but 616 observations missing
<code>date_of_consultation_admission</code>. These 616
community-identified cases are still of interest for our report, so we
will not drop them.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print the number of observations missing case_number, dateentry, and date_of_consultation_admission</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">case_number</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] 0</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dateentry</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] 0</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">date_of_consultation_admission</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] 616</span></span></code></pre></div>
<p>Notice that the commands above returns the number of rows missing
<code>date_of_consultation_admission</code>, but does not overwrite
<code>linelist_cleaned</code> with anything, as there is not an
assignment operator <code>&lt;-</code>.</p>
<p><strong>After viewing the above results, we must comment out (#) the
two lines that <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code> the <code>linelist_cleaned</code>
dataset - we do <em>not</em> want to remove those 616
observations.</strong></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># linelist_cleaned &lt;- linelist_cleaned %&gt;% </span></span>
<span><span class="co">#   filter(!is.na(case_number) &amp; !is.na(date_of_consultation_admission)) </span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="standardise-dates">Standardise dates<a class="anchor" aria-label="anchor" href="#standardise-dates"></a>
</h4>
<p>In <code>linelist_cleaned</code> there are seven columns containing
dates (<code>dateentry</code>, <code>epiquestdate</code>,
<code>date_of_consultation_admission</code>, <code>date_of_onset</code>,
<code>date_lab_sample_taken</code>, <code>dthospitalisation</code>,
<code>dtdeath</code>).</p>
<p>Because the Am Timan dataset contains date columns not found in the
data dictionary, we will <strong>comment out the first code lines
related to DHIS-aligned data</strong> (those commands convert only date
columns known to the MSF data dictionary).</p>
<p>Instead, we uncomment and <strong>use the commands applicable to
non-DHIS2 data</strong>. You may see messages warning that a few date
entries are not in the correct timeframe - this is ok and these entries
will be addressed in the next step.</p>
<p>The command below uses the function <code>parse_date()</code> from
the function {parsedate} to “guess” each individual date in the column -
this approach can handle very messy data in which some dates are written
as “17 October 2016” and others may be written as “2016-10-27”. Read
more about the <code>parse_date()</code> function <a href="https://readr.tidyverse.org/reference/parse_datetime.html" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Non-DHIS2 data --------------------------------------------------------------</span></span>
<span><span class="co">## Use this section if you did not have DHIS2 data. </span></span>
<span></span>
<span><span class="co">## use the parse_date() function to make a first pass at date columns.</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="fu">across</span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu">matches</span><span class="op">(</span><span class="st">"date|Date"</span><span class="op">)</span>,</span>
<span>           .fns  <span class="op">=</span> <span class="op">~</span><span class="fu">ymd</span><span class="op">(</span><span class="fu">parsedate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/parsedate/man/parse_date.html" class="external-link">parse_date</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The code above successfully converted many of our date columns
(remember you can check a column’s class like
<code>class(linelist$date_of_onset</code>).</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">date_of_onset</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Date"</span></span></code></pre></div>
<p>However, this command did not detect the date columns named with
“dt”, such as <code>dtdeath</code> and <code>dthospitalization</code>.
We must <strong>add code to convert those columns manually</strong>:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Individually convert column using the parse_date() function</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>dtdeath <span class="op">=</span> <span class="fu">ymd</span><span class="op">(</span><span class="fu">parse_date</span><span class="op">(</span><span class="va">dtdeath</span><span class="op">)</span><span class="op">)</span>,</span>
<span>         dthospitalisation <span class="op">=</span> <span class="fu">ymd</span><span class="op">(</span><span class="fu">parse_date</span><span class="op">(</span><span class="va">dthospitalisation</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next we uncomment and <strong>modify code to correct unrealistic
dates</strong>. We have browsed our data and know that there are
observations with <code>date_of_onset</code> outside the reasonable
range:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check range of date_of_onset values, ignoring (removing) missing values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">date_of_onset</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1900-07-24" "2017-12-27"</span></span></code></pre></div>
<p>We convert dates outside the expected range (April 2016 to October
2017) to missing using <code>case_when()</code>. Note that when making
the assignment on the right-hand side (RHS), wrap <code>NA</code> in
<code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date()</a></code> because all right-hand side values must be the
same class (“Date” in this scenario).</p>
<p>As you modify this chunk for your own situation, remember that
<strong>each left-hand side (LHS) of the <code>~</code> must be a
logical statement</strong> (not just a value), and to include commas at
the end of each <code>case_when()</code> line (except the last one). In
addition, it is best to write <code>case_when()</code> lines from most
specific at top to most general/catch-all at the bottom. You can read
more about <code>case_when()</code> <a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">on this
tidyverse site</a>.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert dates before April 2016 or after October 2017 to missing (NA)</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>date_of_onset <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">date_of_onset</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2016-04-01"</span><span class="op">)</span>  <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>,</span>
<span>    <span class="va">date_of_onset</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-10-01"</span><span class="op">)</span>  <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>,</span>
<span>    <span class="cn">TRUE</span>                                   <span class="op">~</span> <span class="va">date_of_onset</span><span class="op">)</span><span class="op">)</span></span>
<span>                           </span></code></pre></div>
<p>Check the range of dates again:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check range of date_of_onset values, ignoring (removing) missing values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">date_of_onset</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2016-06-09" "2017-04-22"</span></span></code></pre></div>
<p>We also must <strong>use the provided code to create a column called
<code>epiweek</code></strong>. Although there are already columns that
give the epidemiological weeks of various data points, it is safer to
calculate a new column ourselves, AND later code chunks rely on the
column being named <code>epiweek</code>.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create column epiweek</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    </span>
<span>    <span class="co">## create an epiweek column </span></span>
<span>    epiweek <span class="op">=</span> <span class="fu">tsibble</span><span class="fu">::</span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/year-week.html" class="external-link">yearweek</a></span><span class="op">(</span></span>
<span>      <span class="va">date_of_onset</span>,</span>
<span>      week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co">## create a date version of epiweek </span></span>
<span>    epiweek_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">epiweek</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="create-age-groups">Create age groups<a class="anchor" aria-label="anchor" href="#create-age-groups"></a>
</h4>
<p><strong>To create a column for <code>age_group</code> we must first
clean the column <code>age_years</code></strong>. If we look at the
range of values in <code>age_years</code>, we see something strange:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># See the range of age_years values, removing (excluding) NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">age_years</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "0.08" "9"</span></span></code></pre></div>
<p>We know there are ages older than 9 years. So we check
<code>class(linelist_cleaned$age_years)</code> and see that R is reading
this column as class <em>character</em>, not numeric!</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">age_years</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "character"</span></span></code></pre></div>
<p>We must convert it by <strong>adding the following command</strong>
to the script:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert column age_years to numeric class</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>age_years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">age_years</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If we run the <code><a href="https://rdrr.io/r/base/range.html" class="external-link">range()</a></code> command again, we can see that the
corrected range is 0.08 to 75.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># See the range of age_years values, removing (excluding) NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">age_years</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0.08 75.00</span></span></code></pre></div>
<p>Then, the chunk contains three age-group commands marked
“OPTIONAL”:</p>
<ul>
<li><p>We do <strong>not</strong> want to use “add under 2 years to the
age_years column” because it assumes that we already have a column
<code>age_months</code>, which we do not. <strong>Comment out (#) this
code.</strong></p></li>
<li><p>We also do <strong>not</strong> need to use “change those who are
above or below a certain age to NA”, because we already know our range
of ages and do not have any outside an expected range. <strong>Comment
out (#) this code.</strong></p></li>
<li><p>We <strong>do</strong> want to use “create an age_months column
from decimal years column”, as we do have decimal years. This command
will <strong>create an age_months column</strong> that has a value if a
patient is under 5 years. <strong>Uncomment and use this
code.</strong></p></li>
</ul>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># OPTIONAL: create an age_months column from decimal years column</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>age_months <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>            <span class="va">age_years</span> <span class="op">&lt;</span> <span class="fl">5</span> <span class="op">~</span> <span class="va">age_years</span> <span class="op">*</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Now we can create the columns <code>age_group_mon</code> and
<code>age_group</code>.</strong></p>
<p>First we use the code to create an <code>age_group_mon</code> column
for children under 5 years based on <code>age_months</code>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## create age group column for under 2 years based on months</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>age_group_mon <span class="op">=</span> <span class="fu"><a href="../reference/epikit-exports.html">age_categories</a></span><span class="op">(</span></span>
<span>    <span class="va">age_months</span>, </span>
<span>    breakers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">9</span>, <span class="fl">12</span>, <span class="fl">23</span><span class="op">)</span>, </span>
<span>    ceiling <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>…and we use the similar code below to create <code>age_group</code>
as groupings of the column <code>age_years</code>. The function
<code><a href="../reference/epikit-exports.html">age_categories()</a></code> is used with its <code>breakers =</code>
argument set to a vector <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c( )</a></code> of numbers: 0, 3, 15, 30, and
45. Thus, a 30-year old patient will be included in an age group named
“30-44”. Read more about <code><a href="../reference/epikit-exports.html">age_categories()</a></code> by searching the
Help pane.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## create an age group column by specifying categorical breaks</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>age_group <span class="op">=</span> <span class="fu"><a href="../reference/epikit-exports.html">age_categories</a></span><span class="op">(</span></span>
<span>    <span class="va">age_years</span>,</span>
<span>    breakers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">15</span>, <span class="fl">30</span>, <span class="fl">45</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, ensure that the remaining code in the
<code>create_age_group</code> chunk is commented out (#).</p>
</div>
<div class="section level4">
<h4 id="create-and-clean-outcome-columns">Create and clean outcome columns<a class="anchor" aria-label="anchor" href="#create-and-clean-outcome-columns"></a>
</h4>
<p>In the next chunk (<code>create_vars</code>) we can <strong>comment
out/ignore the code that makes a new numeric column
<code>obs_days</code></strong>, because we do not have a
<code>date_of_exit</code> column in our dataset.</p>
<p>While the template directs us to next create a <code>DIED</code>
column based on the column <code>exit_status</code> containing the
characters “Dead”, we must first <strong>clean our
<code>exit_status</code> column, which is currently in
French</strong>.</p>
<p><strong>Add code that uses <code>case_when()</code> to assign new
values in a new <code>exit_status2</code> column</strong>, as in the
code below. We do this by <strong>modifing code from just below in the
template.</strong> The code uses the function <code>case_when()</code>
to re-define the dataframe <code>linelist_cleaned</code> as itself, but
mutated to create the new column <code>exit_status2</code>. The values
in <code>exit_status2</code> are based on the values in
<code>exit_status</code>, such that when
<code>exist_status == "Décédé"</code>, the value in
<code>exit_status2</code> is “Dead”, and so on.</p>
<p>As you modify this chunk for your own situation, remember that
<strong>each left-hand side (LHS) of the <code>~</code> must be a
logical statement</strong> (not just a value), and to include commas at
the end of each <code>case_when()</code> line (except the last one). It
is best to write <code>case_when()</code> lines from most specific at
top to most general/catch-all at bottom. You can read more about
<code>case_when()</code> <a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">at this
tidyverse site</a>.</p>
<p>Another tip is that all the right-hand side (RHS) values must be the
same class (either character, numeric, etc.). So, if your other RHS
values are character and you want one particular RHS value to be
missing, you cannot just write <code>NA</code> on the RHS. Instead you
must use the special character version of <code>NA</code>,
<code>NA_character_</code>. This may seem like unnecessary trouble, but
it ensures consistency among your data in the long term.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Tabulate to see all possible values of exit_status</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">exit_status</span>, show_na <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;     exit_status  n    percent</span></span>
<span><span class="co">#&gt;               -  2 0.02739726</span></span>
<span><span class="co">#&gt;          Décédé 14 0.19178082</span></span>
<span><span class="co">#&gt;  Déchargé/Guéri 55 0.75342466</span></span>
<span><span class="co">#&gt;         Echappé  2 0.02739726</span></span>
<span></span>
<span><span class="co"># Create exit_status2 from values in exit_status</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>exit_status2 <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">exit_status</span> <span class="op">==</span> <span class="st">"Décédé"</span>          <span class="op">~</span> <span class="st">"Dead"</span>,</span>
<span>    <span class="va">exit_status</span> <span class="op">==</span> <span class="st">"-"</span>               <span class="op">~</span> <span class="cn">NA_character_</span>,</span>
<span>    <span class="va">exit_status</span> <span class="op">==</span> <span class="st">"Echappé"</span>         <span class="op">~</span> <span class="st">"Left"</span>,</span>
<span>    <span class="va">exit_status</span> <span class="op">==</span> <span class="st">"Déchargé/Guéri"</span>  <span class="op">~</span> <span class="st">"Discharged"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Tabulate the NEW exit_status2 column to check correct assignment</span></span>
<span><span class="co"># Tabulate to see all possible values of exit_status</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">exit_status2</span>, show_na <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  exit_status2  n    percent</span></span>
<span><span class="co">#&gt;          Dead 14 0.19718310</span></span>
<span><span class="co">#&gt;    Discharged 55 0.77464789</span></span>
<span><span class="co">#&gt;          Left  2 0.02816901</span></span></code></pre></div>
<p><strong>Now we can make the <code>DIED</code> column</strong>, which
is referenced in later code chunks.</p>
<p>This command creates <code>DIED</code> as a logical
(<code>TRUE</code> or <code>FALSE</code>) column, depending on whether
each observation meets the criteria to the right of the assignment
operator <code>&lt;-</code>. Read more about the <code>%in%</code>
operator on the <a href="https://epirhandbook.com/en/r-basics.html#in" class="external-link">R
Basics chapter</a> of the Epi R Handbook</p>
<p>However, we must <strong>modify the existing command to detect within
the NEW column <code>exit_status2</code>, not
<code>exit_status</code>.</strong></p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Note we are directing R to look within the NEW exit_status2 column</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>DIED <span class="op">=</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">exit_status2</span>, <span class="st">"Dead"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="re-code-values-in-patient_facility_type">
<strong>Re-code values in
<code>patient_facility_type</code></strong><a class="anchor" aria-label="anchor" href="#re-code-values-in-patient_facility_type"></a>
</h4>
<p>When we assigned our columns to match the data dictionary, we used
the column <code>hospitalisation</code> as the column
<code>patient_facility_type</code>. <strong>However, the values in that
column do not match those expected by the template.</strong> In the data
dictionary, <code>patient_facility_type</code> should have values of
“Inpatient” or “Outpatient.” Currently, the values are “Oui” and “Non”.
In later code chunks, analyses are restricted to observations where
<code>patient_facility_type == "Inpatient"</code>, thus, we must align
the values to match the data dictionary.</p>
<p><strong>To clean these values we uncomment and modify code also from
the <code>create_vars</code> chunk, found under the heading “recode
character columns” (the template example is of fixing incorrect
spellings of village names).</strong></p>
<p>Included below are extra steps before and after the
<code>case_when()</code> command using <code>tabyl()</code> to verify
the correct conversion of values. Remove these two commands after
verifying, as otherwise their outputs will appear in the report.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View all the values in patient_facility_type</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">patient_facility_type</span><span class="op">)</span></span>
<span><span class="co">#&gt;  patient_facility_type   n    percent valid_percent</span></span>
<span><span class="co">#&gt;                    Non 699 0.48306842     0.8904459</span></span>
<span><span class="co">#&gt;                    Oui  86 0.05943331     0.1095541</span></span>
<span><span class="co">#&gt;                   &lt;NA&gt; 662 0.45749827            NA</span></span>
<span></span>
<span><span class="co"># Convert the values</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>patient_facility_type <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">patient_facility_type</span> <span class="op">==</span> <span class="st">"Oui"</span> <span class="op">~</span> <span class="st">"Inpatient"</span>,</span>
<span>    <span class="va">patient_facility_type</span> <span class="op">==</span> <span class="st">"Non"</span> <span class="op">~</span> <span class="st">"Outpatient"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Re-check that the values converted sucessfully</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">patient_facility_type</span><span class="op">)</span></span>
<span><span class="co">#&gt;  patient_facility_type   n    percent valid_percent</span></span>
<span><span class="co">#&gt;              Inpatient  86 0.05943331     0.1095541</span></span>
<span><span class="co">#&gt;             Outpatient 699 0.48306842     0.8904459</span></span>
<span><span class="co">#&gt;                   &lt;NA&gt; 662 0.45749827            NA</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="recode-values-in-lab-test-columns">Recode values in lab test columns<a class="anchor" aria-label="anchor" href="#recode-values-in-lab-test-columns"></a>
</h4>
<p>For later steps, we will need many of our testing columns to have the
values “Positive” and “Negative” instead of “Pos” and “Neg”. We can
uncomment and use this helper code to make that change. Some notes about
this step:</p>
<ul>
<li>You may receive warnings about unknown levels in some columns - this
is generally okay but check the changes visually to be sure with
<code>View(linelist_cleaned)</code>.<br>
</li>
<li>One column (<code>test_hepatitis_e_igm</code>) has values 0 and 1
that we want to change to “Positive” and “Negative”. The
<code>fct_recode()</code> function expects <em>character</em> RHS inputs
(within quotes) - so put “0” and “1” in quotes, as below, and confirm
the change has occurred as expected.<br>
</li>
<li>One column (<code>test_hepatitis_b</code>) has a value recorded as
“Weakly pos”. For the purposes of this exercise we re-code this to
“Positive”.</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## sometimes, coding is inconsistent across columns -- for example, "Yes" / "No"</span></span>
<span><span class="co">## may be coded as Y, y, yes, 1 / N, n, no, 0. You can change them all at once!</span></span>
<span><span class="co">## Create a list of the columns you want to change, and run the following.</span></span>
<span><span class="co">## You may need to edit this code if options are different in your data.</span></span>
<span></span>
<span><span class="co"># # create list of columns</span></span>
<span><span class="va">change_test_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hep_e_rdt"</span>, <span class="st">"hep_c_rdt"</span>, <span class="st">"hep_b_rdt"</span>, <span class="st">"test_hepatitis_a"</span>, <span class="st">"test_hepatitis_b"</span>, <span class="st">"test_hepatitis_c"</span>, <span class="st">"malaria_rdt_at_admission"</span>, <span class="st">"test_hepatitis_e_genotype"</span>, <span class="st">"test_hepatitis_e_igm"</span>, <span class="st">"test_hepatitis_e_virus"</span>, <span class="st">"hevpcr"</span>, <span class="st">"other_arthropod_transmitted_virus"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># standardize values</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="fu">across</span><span class="op">(</span></span>
<span>      .cols <span class="op">=</span> <span class="fu">all_of</span><span class="op">(</span><span class="va">change_test_vars</span><span class="op">)</span>,</span>
<span>      .fns <span class="op">=</span> <span class="op">~</span><span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_recode.html" class="external-link">fct_recode</a></span><span class="op">(</span></span>
<span>        <span class="va">.x</span>,</span>
<span>        Positive <span class="op">=</span> <span class="st">"Pos"</span>,</span>
<span>        Positive <span class="op">=</span> <span class="st">"pos"</span>,</span>
<span>        Positive <span class="op">=</span> <span class="st">"yes"</span>,</span>
<span>        Positive <span class="op">=</span> <span class="st">"Yes"</span>,</span>
<span>        Positive <span class="op">=</span> <span class="st">"Weakly pos"</span>,</span>
<span>        Positive <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>        Negative <span class="op">=</span> <span class="st">"Neg"</span>,</span>
<span>        Negative <span class="op">=</span> <span class="st">"neg"</span>,</span>
<span>        Negative <span class="op">=</span> <span class="st">"no"</span>,</span>
<span>        Negative <span class="op">=</span> <span class="st">"No"</span>,</span>
<span>        Negative <span class="op">=</span> <span class="st">"0"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Lastly for the chunk <code>create_vars</code> we must create
a case definition column.</strong> In this use of
<code>case_when()</code>, the last line left-hand side (LHS) is TRUE,
which serves as a catch-all for any other possible values that have not
yet met the criteria of the earlier <code>case_when()</code> lines.</p>
<p>Note how this code checks the column <code>hep_e_rdt</code> for
“Positive”. The earlier cleaning steps converting <code>hep_e_rdt</code>
values from “Pos” to “Positive” were necessary for this case definition
to properly apply.</p>
<p>In addition we need to <strong>change the value looked for in
<code>other_cases_in_hh</code> from “Yes” to “Oui”.</strong></p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># You MUST modify this section to match your case definition. The below</span></span>
<span><span class="co"># uses positive RDT for Confirmed and epi link only for Probable.</span></span>
<span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>case_def <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">hep_e_rdt</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">other_cases_in_hh</span><span class="op">)</span>           <span class="op">~</span> <span class="cn">NA_character_</span>,</span>
<span>    <span class="va">hep_e_rdt</span> <span class="op">==</span> <span class="st">"Positive"</span>                               <span class="op">~</span> <span class="st">"Confirmed"</span>,</span>
<span>    <span class="va">hep_e_rdt</span> <span class="op">!=</span> <span class="st">"Positive"</span> <span class="op">&amp;</span> <span class="va">other_cases_in_hh</span> <span class="op">==</span> <span class="st">"Oui"</span>  <span class="op">~</span> <span class="st">"Probable"</span>,</span>
<span>    <span class="cn">TRUE</span>                                                  <span class="op">~</span> <span class="st">"Suspected"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="factor-columns">Factor columns<a class="anchor" aria-label="anchor" href="#factor-columns"></a>
</h4>
<p>Factor columns require specialized functions to manipulate (see the
Epidemiologist R Handbook chapter <a href="https://epirhandbook.com/en/factors.html" class="external-link">Factors</a>). The one
factor column we should clean now is <code>sex</code>, with the
following code:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>sex <span class="op">=</span> <span class="fu">fct_recode</span><span class="op">(</span><span class="va">sex</span>, <span class="cn">NULL</span> <span class="op">=</span> <span class="st">"Unknown/unspecified"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And we can verify the unique values in column <code>sex</code> with a
quick table:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span>
<span><span class="co">#&gt;  sex   n   percent</span></span>
<span><span class="co">#&gt;    F 719 0.4968901</span></span>
<span><span class="co">#&gt;    M 728 0.5031099</span></span></code></pre></div>
<p><strong>Comment out (#) the rest of the <code>factor_vars</code>
chunk</strong>, such as the code to change the order of levels in
categorical columns. The Am Timan dataset does not include a column
<code>time_to_death</code> and we do not need to change the order of any
categorical columns.</p>
</div>
<div class="section level4">
<h4 id="cleaning-patient-origin">Cleaning patient origin<a class="anchor" aria-label="anchor" href="#cleaning-patient-origin"></a>
</h4>
<p>We must <strong>add one additional cleaning step</strong> necessary
for this dataset.</p>
<p>The column <code>patient_origin</code> (originally the column
<em>quartier</em> in the raw dataset) is referenced in the place
analyses chunks, for example when calculating attack rates by region. In
those steps, the column <code>patient_origin</code> in
<code>linelist_cleaned</code> is <em>joined to</em> the column
<code>patient_origin</code> of the data frame
<code>population_data_region</code> (which was imported in the
population and lab data steps).</p>
<p>However, the place names in <code>population_data_region</code> are
ALL CAPITAL LETTERS. This is not true in <code>linelist_cleaned</code> -
so the join will not register any matches. The easiest way to solve this
problem is to <strong>redefine the <code>linelist_cleaned</code> column
into all capital letters as well</strong>, using the base R function
<code><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper()</a></code>, which means “to upper case”:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>patient_origin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">patient_origin</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="gather-common-columns-for-later-analysis">Gather common columns for later analysis<a class="anchor" aria-label="anchor" href="#gather-common-columns-for-later-analysis"></a>
</h4>
<p>These columns names are stored in vectors that are created using the
function <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>. These vectors of names will be referenced in
later code chunks. This way if you want to run the same function over
these columns you can simply use the named vector rather than typing out
each column individually.</p>
<p>The default template code creates two vectors - one for symptom
columns (<code>SYMPTOMS</code>) and one for laboratory testing columns
(<code>LABS</code>).</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># vectors of column names ----------------------------------------------------</span></span>
<span><span class="co"># create a grouping of all symptoms </span></span>
<span></span>
<span><span class="va">SYMPTOMS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"generalized_itch"</span>, </span>
<span><span class="co">#             "history_of_fever", </span></span>
<span>              <span class="st">"fever"</span>,</span>
<span>              <span class="st">"joint_pains"</span>,</span>
<span>              <span class="st">"epigastric_pain_heartburn"</span>,</span>
<span>              <span class="st">"nausea_anorexia"</span>,</span>
<span>              <span class="st">"vomiting"</span>, </span>
<span>              <span class="st">"diarrhoea"</span>,</span>
<span>              <span class="st">"bleeding"</span>, </span>
<span>              <span class="st">"headache"</span>,</span>
<span>              <span class="st">"mental_state"</span>,</span>
<span><span class="co">#              "convulsions",</span></span>
<span>              <span class="st">"other_symptoms"</span>  </span>
<span>              <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a grouping of all lab tests </span></span>
<span><span class="va">LABS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hep_b_rdt"</span>, </span>
<span>          <span class="st">"hep_c_rdt"</span>,</span>
<span>          <span class="st">"hep_e_rdt"</span>,</span>
<span>          <span class="st">"test_hepatitis_a"</span>,</span>
<span>          <span class="st">"test_hepatitis_b"</span>,</span>
<span>          <span class="st">"test_hepatitis_c"</span>,</span>
<span><span class="co">#          "test_hepatitis_e_igg",</span></span>
<span>          <span class="st">"test_hepatitis_e_igm"</span> ,</span>
<span>          <span class="st">"test_hepatitis_e_genotype"</span>,</span>
<span>          <span class="st">"test_hepatitis_e_virus"</span>,</span>
<span>          <span class="st">"malaria_rdt_at_admission"</span>,</span>
<span><span class="co">#          "malaria_blood_film", </span></span>
<span>          <span class="st">"dengue"</span>,</span>
<span><span class="co">#          "dengue_rdt", </span></span>
<span>          <span class="st">"yellow_fever"</span>,</span>
<span><span class="co">#          "typhoid",</span></span>
<span>          <span class="st">"chikungunya_onyongnyong"</span>, </span>
<span><span class="co">#          "ebola_marburg",</span></span>
<span><span class="co">#          "lassa_fever",</span></span>
<span>          <span class="st">"other_arthropod_transmitted_virus"</span> </span>
<span><span class="co">#          "other_pathogen"</span></span>
<span>          <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="final-setup-for-report">Final setup for report<a class="anchor" aria-label="anchor" href="#final-setup-for-report"></a>
</h4>
<p>The next code chunk, <code>report_setup</code>, defines important
date-related parameters used to produce the report, and filters to
remove any observations with date of onset after the
<code>reporting_week</code> (<code>reporting_week</code> is an object
defined at the beginning of the script).</p>
<p>The second command in this chunk (shown below) uses
<code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code> to remove observations later than the end of the
pre-defined <code>reporting_week</code>. However, <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code>
also removes observations with missing
<code>date_of_consultation_admission</code>. To avoid this <strong>we
must can add <code>| is.na(date_of_onset)</code> into the
filter</strong> (This is read as: “keep observations where
<code>date_of_consultation_admission</code> is less than or equal to
<code>obs_end</code>, OR, if <code>date_of_consultation_admission</code>
is missing”).</p>
</div>
<div class="section level4">
<h4 id="export-if-desired">Export if desired<a class="anchor" aria-label="anchor" href="#export-if-desired"></a>
</h4>
<p>And finally, if desired you can <strong>export the cleaned
dataset</strong> for other purposes.</p>
<p>The command <code>export()</code> is also from the package {rio}.</p>
<p>First, the object that you want to export is named
(<code>linelist_cleaned</code>).</p>
<p>Then, the function <code>str_glue()</code> creates the name for the
new file by combining “AmTiman_linelist_cleaned_” with the current date
and finally the extention “.xlsx”. Don’t be confused - this is
equivalent of writing
<code>rio::export(linelist_cleaned, "AmTiman_linelist_cleaned_2019-08-24.xlsx")</code>,
but using <code>str_glue()</code> and <code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date()</a></code> means the
current date will always be used automatically.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## OPTIONAL: save your cleaned dataset! </span></span>
<span><span class="co">## put the current date in the name so you know!</span></span>
<span><span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html" class="external-link">export</a></span><span class="op">(</span><span class="va">linelist_cleaned</span>, <span class="fu">str_glue</span><span class="op">(</span><span class="st">"AmTiman_linelist_cleaned_{Sys.Date()}.xlsx"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="analysis">Analysis<a class="anchor" aria-label="anchor" href="#analysis"></a>
</h2>
<p>After cleaning the data, there are three sections of the template
that produce tabular, graphic, and cartographic (map) analysis
outputs.</p>
<div class="section level3">
<h3 id="person">Person<a class="anchor" aria-label="anchor" href="#person"></a>
</h3>
<p>This first section produces descriptive analyses about the patient’s
demographics and attack rates.</p>
<div class="section level4">
<h4 id="demographic-tables">Demographic Tables:<a class="anchor" aria-label="anchor" href="#demographic-tables"></a>
</h4>
<p>The person analysis section begins with a couple sentences that
contain <strong>in-line code</strong> - code embedded in normal
RMarkdown text (not within an R code chunk). The second sentence
<strong>in-line code</strong> inserts the number of males and females by
counting the observations with “Male” and “Female” in the variable
<code>sex</code>. <strong>Because our dataset’s variable
<code>sex</code> contains <code>M</code> and <code>F</code> instead, we
must modify this in-line code (or modify our variable) so the
<code><a href="../reference/epikit-exports.html">fmt_count()</a></code> function is searching for the correct
terms.</strong></p>
<pre><code>From the start of the outbreak up until 2018 W17 there were a 
total of 614 cases. There were
304 (49.5%) females and
310 (50.5%) males. 
</code></pre>
<p>The first demographic table presents patients by their age group (the
table’s rows) and their relationship with the case definition (the
table’s columns). This chunk uses pipes to link many different functions
together and produce a table (<code>%&gt;%</code> is the pipe operator -
see the <a href="https://epirhandbook.com/en/r-basics.html#piping" class="external-link">R
Basics chapter</a> of the Epidemiologist R Handbook:</p>
<ul>
<li>
<code>select()</code> keeps only the columns of interest</li>
<li>
<code>mutate()</code> converts any instances of <code>NA</code> in
the <code>case_def</code> column to the word “Missing”, so the table’s
presentation is more clean. Note this change only applies in this table,
not in the underlying dataset.<br>
</li>
<li>
<code>tbl_summary()</code> creates a summary table by age group with
counts and percentages, with columns for each <code>case_def</code>
value.<br>
</li>
<li>
<code>add_overall()</code> is a function from {gtsummary} that adds
overall totals to the table<br>
</li>
<li>
<code>bold_labels()</code> is from {gtsummary} and makes the
variable names bold.<br>
</li>
<li>
<code>as_flex_table()</code> is from the {flextable} package, which
allows more detailed editing of the table presentation<br>
</li>
<li>
<code>bold()</code> makes the header bold<br>
</li>
<li>
<code>set_table_properties()</code> aligns the table to the maximum
width of the word document report.</li>
</ul>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## only keep variables of interest</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">age_group</span>, <span class="va">case_def</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## make NAs show up as "Missing" (so they are included in counts)</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>case_def <span class="op">=</span> <span class="fu">fct_explicit_na</span><span class="op">(</span><span class="va">case_def</span>, <span class="st">"Missing"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">## create a table with counts/percentages by column</span></span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span>by <span class="op">=</span> <span class="va">case_def</span>,</span>
<span>              percent <span class="op">=</span> <span class="st">"column"</span>,</span>
<span>              label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>age_group <span class="op">=</span> <span class="st">"Age group"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## add totals</span></span>
<span>  <span class="fu">add_overall</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## make variable names bold </span></span>
<span>  <span class="fu">bold_labels</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="348578f8-30e2-46e8-83d9-44558023b504"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-83e18cde{table-layout:auto;width:0%;}.cl-83d0cbf6{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83d0cc14{font-family:'Arial';font-size:6.6pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-83d0cc1e{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-83d0cc1f{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-83d0fb9e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83d0fbb2{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83d0fbb3{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83d0fbbc{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83d0fbbd{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83d0fbc6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-83d1966c{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d19676{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d19680{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d1968a{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d1968b{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d19694{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d1969e{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196a8{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196b2{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196b3{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196b4{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196bc{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196c6{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196c7{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196d0{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196d1{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196da{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196e4{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196ee{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196ef{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196f8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d196f9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d19702{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d1970c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d1970d{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d19716{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d19717{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d19718{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d19720{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-83d1972a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-83e18cde">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-83d1970d"><p class="cl-83d0fb9e"><span class="cl-83d0cbf6">Characteristic</span></p></td>
<td class="cl-83d19720"><p class="cl-83d0fbb2"><span class="cl-83d0cbf6">Overall, N = 614</span><span class="cl-83d0cc14">1</span></p></td>
<td class="cl-83d19718"><p class="cl-83d0fbb2"><span class="cl-83d0cbf6">Confirmed, N = 70</span><span class="cl-83d0cc14">1</span></p></td>
<td class="cl-83d19717"><p class="cl-83d0fbb2"><span class="cl-83d0cbf6">Probable, N = 4</span><span class="cl-83d0cc14">1</span></p></td>
<td class="cl-83d1972a"><p class="cl-83d0fbb2"><span class="cl-83d0cbf6">Suspected, N = 512</span><span class="cl-83d0cc14">1</span></p></td>
<td class="cl-83d19716"><p class="cl-83d0fbb2"><span class="cl-83d0cbf6">Missing, N = 28</span><span class="cl-83d0cc14">1</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-83d19694"><p class="cl-83d0fbb3"><span class="cl-83d0cbf6">Age group</span></p></td>
<td class="cl-83d19680"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e"></span></p></td>
<td class="cl-83d1966c"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e"></span></p></td>
<td class="cl-83d1968a"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e"></span></p></td>
<td class="cl-83d1968b"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e"></span></p></td>
<td class="cl-83d19676"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-83d196b4"><p class="cl-83d0fbbd"><span class="cl-83d0cc1e">0-1</span></p></td>
<td class="cl-83d196a8"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">17 (2.8%)</span></p></td>
<td class="cl-83d196b2"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">2 (2.9%)</span></p></td>
<td class="cl-83d1969e"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">0 (0%)</span></p></td>
<td class="cl-83d196b3"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">15 (2.9%)</span></p></td>
<td class="cl-83d196bc"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">0 (0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-83d196b4"><p class="cl-83d0fbbd"><span class="cl-83d0cc1e">2-14</span></p></td>
<td class="cl-83d196a8"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">265 (43%)</span></p></td>
<td class="cl-83d196b2"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">24 (34%)</span></p></td>
<td class="cl-83d1969e"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">1 (25%)</span></p></td>
<td class="cl-83d196b3"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">230 (45%)</span></p></td>
<td class="cl-83d196bc"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">10 (36%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-83d196b4"><p class="cl-83d0fbbd"><span class="cl-83d0cc1e">15-29</span></p></td>
<td class="cl-83d196a8"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">216 (35%)</span></p></td>
<td class="cl-83d196b2"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">29 (41%)</span></p></td>
<td class="cl-83d1969e"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">1 (25%)</span></p></td>
<td class="cl-83d196b3"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">173 (34%)</span></p></td>
<td class="cl-83d196bc"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">13 (46%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-83d196b4"><p class="cl-83d0fbbd"><span class="cl-83d0cc1e">30-44</span></p></td>
<td class="cl-83d196a8"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">92 (15%)</span></p></td>
<td class="cl-83d196b2"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">12 (17%)</span></p></td>
<td class="cl-83d1969e"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">2 (50%)</span></p></td>
<td class="cl-83d196b3"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">76 (15%)</span></p></td>
<td class="cl-83d196bc"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">2 (7.1%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-83d196da"><p class="cl-83d0fbbd"><span class="cl-83d0cc1e">45+</span></p></td>
<td class="cl-83d196c7"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">24 (3.9%)</span></p></td>
<td class="cl-83d196d0"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">3 (4.3%)</span></p></td>
<td class="cl-83d196e4"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">0 (0%)</span></p></td>
<td class="cl-83d196d1"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">18 (3.5%)</span></p></td>
<td class="cl-83d196c6"><p class="cl-83d0fbbc"><span class="cl-83d0cc1e">3 (11%)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="6" class="cl-83d196f9"><p class="cl-83d0fbc6"><span class="cl-83d0cc1f">1</span><span class="cl-83d0cc1e">n (%)</span></p></td></tr></tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="9444a6bb-05fc-44d7-8f78-6a56b7913f69"></div>
<script>
var dest = document.getElementById("9444a6bb-05fc-44d7-8f78-6a56b7913f69");
var template = document.getElementById("348578f8-30e2-46e8-83d9-44558023b504");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>You can change the argument <code>by =</code> to refer to any number
of columns (in this next example, by <code>sex</code>).</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">age_group</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>sex <span class="op">=</span> <span class="fu">fct_explicit_na</span><span class="op">(</span><span class="va">sex</span>, <span class="st">"Missing"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span>by <span class="op">=</span> <span class="va">sex</span>,</span>
<span>              percent <span class="op">=</span> <span class="st">"column"</span>,</span>
<span>              label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>age_group <span class="op">=</span> <span class="st">"Age group"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">add_overall</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## make variable names bold </span></span>
<span>  <span class="fu">bold_labels</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="98b37e9e-6ea8-4440-9c09-cc2efde57431"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-8558e38c{table-layout:auto;width:0%;}.cl-8547e5fa{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8547e60e{font-family:'Arial';font-size:6.6pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8547e618{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8547e622{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-854814d0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-854814e4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-854814e5{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-854814ee{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-854814f8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8548150c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8548adbe{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548addc{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ade6{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ade7{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548adf0{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548adfa{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548adfb{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae04{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae0e{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae0f{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae18{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae22{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae2c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae40{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae4a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae54{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae55{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae5e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae68{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8548ae72{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-8558e38c">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-8548ae55"><p class="cl-854814d0"><span class="cl-8547e5fa">Characteristic</span></p></td>
<td class="cl-8548ae5e"><p class="cl-854814e4"><span class="cl-8547e5fa">Overall, N = 614</span><span class="cl-8547e60e">1</span></p></td>
<td class="cl-8548ae68"><p class="cl-854814e4"><span class="cl-8547e5fa">F, N = 304</span><span class="cl-8547e60e">1</span></p></td>
<td class="cl-8548ae72"><p class="cl-854814e4"><span class="cl-8547e5fa">M, N = 310</span><span class="cl-8547e60e">1</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-8548adbe"><p class="cl-854814e5"><span class="cl-8547e5fa">Age group</span></p></td>
<td class="cl-8548addc"><p class="cl-854814ee"><span class="cl-8547e618"></span></p></td>
<td class="cl-8548ade6"><p class="cl-854814ee"><span class="cl-8547e618"></span></p></td>
<td class="cl-8548ade7"><p class="cl-854814ee"><span class="cl-8547e618"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8548adf0"><p class="cl-854814f8"><span class="cl-8547e618">0-1</span></p></td>
<td class="cl-8548adfa"><p class="cl-854814ee"><span class="cl-8547e618">17 (2.8%)</span></p></td>
<td class="cl-8548adfb"><p class="cl-854814ee"><span class="cl-8547e618">8 (2.6%)</span></p></td>
<td class="cl-8548ae04"><p class="cl-854814ee"><span class="cl-8547e618">9 (2.9%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8548adf0"><p class="cl-854814f8"><span class="cl-8547e618">2-14</span></p></td>
<td class="cl-8548adfa"><p class="cl-854814ee"><span class="cl-8547e618">265 (43%)</span></p></td>
<td class="cl-8548adfb"><p class="cl-854814ee"><span class="cl-8547e618">91 (30%)</span></p></td>
<td class="cl-8548ae04"><p class="cl-854814ee"><span class="cl-8547e618">174 (56%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8548adf0"><p class="cl-854814f8"><span class="cl-8547e618">15-29</span></p></td>
<td class="cl-8548adfa"><p class="cl-854814ee"><span class="cl-8547e618">216 (35%)</span></p></td>
<td class="cl-8548adfb"><p class="cl-854814ee"><span class="cl-8547e618">146 (48%)</span></p></td>
<td class="cl-8548ae04"><p class="cl-854814ee"><span class="cl-8547e618">70 (23%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8548adf0"><p class="cl-854814f8"><span class="cl-8547e618">30-44</span></p></td>
<td class="cl-8548adfa"><p class="cl-854814ee"><span class="cl-8547e618">92 (15%)</span></p></td>
<td class="cl-8548adfb"><p class="cl-854814ee"><span class="cl-8547e618">52 (17%)</span></p></td>
<td class="cl-8548ae04"><p class="cl-854814ee"><span class="cl-8547e618">40 (13%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8548ae0e"><p class="cl-854814f8"><span class="cl-8547e618">45+</span></p></td>
<td class="cl-8548ae0f"><p class="cl-854814ee"><span class="cl-8547e618">24 (3.9%)</span></p></td>
<td class="cl-8548ae18"><p class="cl-854814ee"><span class="cl-8547e618">7 (2.3%)</span></p></td>
<td class="cl-8548ae22"><p class="cl-854814ee"><span class="cl-8547e618">17 (5.5%)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="4" class="cl-8548ae2c"><p class="cl-8548150c"><span class="cl-8547e622">1</span><span class="cl-8547e618">n (%)</span></p></td></tr></tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="eedf7a60-2d7c-4398-8258-76941708a642"></div>
<script>
var dest = document.getElementById("eedf7a60-2d7c-4398-8258-76941708a642");
var template = document.getElementById("98b37e9e-6ea8-4440-9c09-cc2efde57431");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>Outside of the R code chunk, note the <strong>in-line code</strong>
that gives the counts and percents of rows missing sex and
age_group.</p>
</div>
<div class="section level4">
<h4 id="age-pyramids">Age pyramids<a class="anchor" aria-label="anchor" href="#age-pyramids"></a>
</h4>
<p>To print an age pyramid in your report, use the code below. A few
things to note:</p>
<ul>
<li>The <strong>column for <code>split_by =</code> should have two
non-missing value options</strong> (e.g. Male or Female, Oui or Non,
etc. Three will create a messy output.)<br>
</li>
<li>The variable names work with or without quotation marks<br>
</li>
<li>The dashed lines in the bars are the midpoint of the un-stratified
age group<br>
</li>
<li>You can adjust the position of the legend by replacing
<code>legend.position = "bottom"</code> with “top”, “left”, or
“right”<br>
</li>
<li>Read more by searching “age_pyramid” in the Help tab of the
lower-right RStudio pane</li>
</ul>
<p>You can make this a pyramid of months by supplying
<code>age_group_mon</code> to the <code>age_group =</code> argument.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot age pyramid by sex </span></span>
<span><span class="fu"><a href="../reference/apyramid.html">age_pyramid</a></span><span class="op">(</span><span class="va">linelist_cleaned</span>,</span>
<span>                  age_group <span class="op">=</span> <span class="st">"age_group"</span>, </span>
<span>                  split_by <span class="op">=</span> <span class="st">"sex"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Cases (n)"</span>, x <span class="op">=</span> <span class="st">"Age group"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># change axis  labels</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>,     <span class="co"># move legend to bottom</span></span>
<span>        legend.title <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, <span class="co"># remove title</span></span>
<span>        text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>  <span class="co"># change text size</span></span>
<span>       <span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/age_pyramid-1.png" width="576"></p>
<p><strong>To have an age pyramid of patients under 2 by month age
groups, it is best to add a <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code> step to the beginning
of the code chunk, as shown below</strong>. This selects for
<code>linelist_cleaned</code> observations that meet the specified
critera and passes that subsetted dataset through the “pipes” to
<code><a href="../reference/apyramid.html">age_pyramid()</a></code>. If this <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code> step is not
added, you will see that the largest pyramid bars are of “missing”.
These are the patients old enough to not have a months age group.</p>
<p>If you add this filtering step, <strong>you must also modify
<code><a href="../reference/apyramid.html">age_pyramid()</a></code> by removing its first argument
<code>linelist_cleaned,</code></strong>. The dataset is already given to
the command in the <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code> and is passed to
<code><a href="../reference/apyramid.html">age_pyramid()</a></code> via piping.</p>
<p>Note that the filter step does not drop any observations from the
<code>linelist_cleaned</code> object itself. Because the filter is
<strong>not</strong> being assigned (<code>&lt;-</code>) to over-write
<code>linelist_cleaned</code>, this filter is only temporarily applied
for the purpose of producing the age pyramid.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot age pyramid by month groups, for observations under 2 years</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">age_years</span> <span class="op">&lt;=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/apyramid.html">age_pyramid</a></span><span class="op">(</span>age_group <span class="op">=</span> <span class="st">"age_group_mon"</span>,</span>
<span>                   split_by <span class="op">=</span> <span class="st">"sex"</span><span class="op">)</span> <span class="op">+</span></span>
<span>                  <span class="co"># stack_by = "case_def") +</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Cases (n)"</span>, x <span class="op">=</span> <span class="st">"Age group (months)"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># change axis  labels (nb. x/y flip)</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>,     <span class="co"># move legend to bottom</span></span>
<span>        legend.title <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, <span class="co"># remove title</span></span>
<span>        text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>  <span class="co"># change text size</span></span>
<span>       <span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/age_pyramid_under_two-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="inpatient-statistics">Inpatient statistics<a class="anchor" aria-label="anchor" href="#inpatient-statistics"></a>
</h4>
<p>The text following the age pyramids uses <strong>in-line
code</strong> to describe the distribution of outpatient and inpatient
observations, and descriptive statistics of the length of stay for
inpatients. <strong>The Am Timan dataset does not have length of stay,
so it is best to delete those related sentences related to
<code>obs_days</code> for the final report</strong>.</p>
</div>
<div class="section level4">
<h4 id="symptom-and-lab-descriptive-tables">Symptom and lab descriptive tables<a class="anchor" aria-label="anchor" href="#symptom-and-lab-descriptive-tables"></a>
</h4>
<p>This next code also uses the <code>tbl_summary()</code> function to
<strong>create descriptive tables of all the variables that were
included in the <code>SYMPTOMS</code> variable list</strong>.</p>
<ul>
<li>In the <code>tbl_summary()</code> function, <code>SYMPTOMS</code>
(the value supplied to the second argument) is an object we defined in
data cleaning that is a list of variables to tabulate. If this code
produces an error about an “Unknown column”, ensure that the variables
in the object <code>SYMPTOMS</code> are <em>all</em> present in your
dataset (and spelled correctly).</li>
<li>Also in <code>tbl_summary()</code>, the argument <code>keep =</code>
must represent the character value to be counted for the the table. As
these Am Timan variables are still in French, <strong>we change
<code>keep = "Yes"</code> to <code>keep = "Oui"</code></strong>.<br>
</li>
<li>The <code>mutate()</code> function is aesthetically changing
variable names with underscores to spaces.</li>
</ul>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get counts and proportions for all variables named in SYMPTOMS</span></span>
<span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">all_of</span><span class="op">(</span><span class="va">SYMPTOMS</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># fix the way symptoms are displayed</span></span>
<span>  <span class="co"># str_replace_all switches underscore for space in the variable column</span></span>
<span>  <span class="co"># str_to_sentence makes the first letter capital, and all others lowercase</span></span>
<span>  <span class="fu">modify_table_body</span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">.x</span> <span class="op">%&gt;%</span> </span>
<span>      <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_to_sentence</span><span class="op">(</span><span class="fu">str_replace_all</span><span class="op">(</span><span class="va">label</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="2c46437b-3272-4592-a9cc-64eb523ac2aa"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-88b03de6{table-layout:auto;width:0%;}.cl-88a0b132{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-88a0b146{font-family:'Arial';font-size:6.6pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-88a0b147{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-88a0b150{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-88a0d54a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-88a0d554{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-88a0d55e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-88a0d55f{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-88a0d568{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-88a0d572{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-88a1854e{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a18562{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a1856c{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a18576{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a18577{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a18580{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a18581{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a1858a{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a18594{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a18595{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a1859e{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a1859f{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185a8{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185a9{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185b2{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185b3{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185bc{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185bd{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185c6{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185d0{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185d1{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185d2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185da{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88a185e4{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-88b03de6">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-88a185da"><p class="cl-88a0d54a"><span class="cl-88a0b132">Characteristic</span></p></td>
<td class="cl-88a185e4"><p class="cl-88a0d554"><span class="cl-88a0b132">N = 614</span><span class="cl-88a0b146">1</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18562"><p class="cl-88a0d55e"><span class="cl-88a0b147">Generalized itch</span></p></td>
<td class="cl-88a1854e"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">186 (31%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">404 (68%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">2 (0.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1859e"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a1859f"><p class="cl-88a0d55f"><span class="cl-88a0b147">22</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a185a9"><p class="cl-88a0d55e"><span class="cl-88a0b147">Fever</span></p></td>
<td class="cl-88a185a8"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">73 (12%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">521 (88%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1858a"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a18581"><p class="cl-88a0d55f"><span class="cl-88a0b147">20</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1856c"><p class="cl-88a0d55e"><span class="cl-88a0b147">Joint pains</span></p></td>
<td class="cl-88a18576"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">410 (70%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">176 (30%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">U</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">2 (0.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1858a"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a18581"><p class="cl-88a0d55f"><span class="cl-88a0b147">25</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18594"><p class="cl-88a0d55e"><span class="cl-88a0b147">Epigastric pain heartburn</span></p></td>
<td class="cl-88a18595"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">215 (36%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">376 (64%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">U</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1859e"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a1859f"><p class="cl-88a0d55f"><span class="cl-88a0b147">22</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a185a9"><p class="cl-88a0d55e"><span class="cl-88a0b147">Nausea anorexia</span></p></td>
<td class="cl-88a185a8"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">248 (42%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">346 (58%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1858a"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a18581"><p class="cl-88a0d55f"><span class="cl-88a0b147">20</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18594"><p class="cl-88a0d55e"><span class="cl-88a0b147">Vomiting</span></p></td>
<td class="cl-88a18595"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">232 (39%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">362 (61%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1858a"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a18581"><p class="cl-88a0d55f"><span class="cl-88a0b147">20</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a185a9"><p class="cl-88a0d55e"><span class="cl-88a0b147">Diarrhoea</span></p></td>
<td class="cl-88a185a8"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">506 (86%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">3 (0.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">81 (14%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1859e"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a1859f"><p class="cl-88a0d55f"><span class="cl-88a0b147">24</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18594"><p class="cl-88a0d55e"><span class="cl-88a0b147">Bleeding</span></p></td>
<td class="cl-88a18595"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">551 (93%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">39 (6.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1859e"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a1859f"><p class="cl-88a0d55f"><span class="cl-88a0b147">24</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a185a9"><p class="cl-88a0d55e"><span class="cl-88a0b147">Headache</span></p></td>
<td class="cl-88a185a8"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">102 (17%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Oui</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">489 (83%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a185b2"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a185b3"><p class="cl-88a0d55f"><span class="cl-88a0b147">23</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a185a9"><p class="cl-88a0d55e"><span class="cl-88a0b147">Mental state</span></p></td>
<td class="cl-88a185a8"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Coma</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">2 (0.4%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Confus/somnolent</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">11 (2.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Normal</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">544 (98%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a1859e"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a1859f"><p class="cl-88a0d55f"><span class="cl-88a0b147">57</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a185bc"><p class="cl-88a0d55e"><span class="cl-88a0b147">Other symptoms</span></p></td>
<td class="cl-88a185bd"><p class="cl-88a0d55f"><span class="cl-88a0b147"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">-</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">3 (7.1%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Agiter</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">1 (2.4%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Ajiter</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">2 (4.8%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Convulsion+fever</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">1 (2.4%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Demangeson</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">1 (2.4%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Drepa</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">1 (2.4%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Fatigue</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">16 (38%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Ictere neonat</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">1 (2.4%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Non</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">12 (29%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a18580"><p class="cl-88a0d568"><span class="cl-88a0b147">Paludisme</span></p></td>
<td class="cl-88a18577"><p class="cl-88a0d55f"><span class="cl-88a0b147">4 (9.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-88a185c6"><p class="cl-88a0d568"><span class="cl-88a0b147">Unknown</span></p></td>
<td class="cl-88a185d0"><p class="cl-88a0d55f"><span class="cl-88a0b147">572</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="2" class="cl-88a185d1"><p class="cl-88a0d572"><span class="cl-88a0b150">1</span><span class="cl-88a0b147">n (%)</span></p></td></tr></tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="ee8766d1-e607-4cbc-91cb-ad7acf6a8a81"></div>
<script>
var dest = document.getElementById("ee8766d1-e607-4cbc-91cb-ad7acf6a8a81");
var template = document.getElementById("2c46437b-3272-4592-a9cc-64eb523ac2aa");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>These tables may be large and unwieldy at first, until you implement
further data cleaning steps. Using <code>fct_recode()</code> to convert
unexpected or mistakenly typed values as desired. For example, “OuI”
should be recoded as “Oui” and “U” as “Unknown”.</p>
<p>The code for making a table with the <code>LAB</code> columns is very
similar:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get counts and proportions for all variables named in SYMPTOMS</span></span>
<span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">all_of</span><span class="op">(</span><span class="va">LABS</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># fix the way symptoms are displayed</span></span>
<span>  <span class="co"># str_replace_all switches underscore for space in the variable column</span></span>
<span>  <span class="co"># str_to_sentence makes the first letter capital, and all others lowercase</span></span>
<span>  <span class="fu">modify_table_body</span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">.x</span> <span class="op">%&gt;%</span> </span>
<span>      <span class="fu">mutate</span><span class="op">(</span>label <span class="op">=</span> <span class="fu">str_to_sentence</span><span class="op">(</span><span class="fu">str_replace_all</span><span class="op">(</span><span class="va">label</span>, <span class="st">"_"</span>, <span class="st">" "</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="fc47493a-bf45-4857-acec-f3f2c8947d4d"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-8b77bdce{table-layout:auto;width:0%;}.cl-8b686248{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8b68625c{font-family:'Arial';font-size:6.6pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8b686266{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8b686270{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8b688606{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8b68861a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8b68861b{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8b68862e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8b68864c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8b68864d{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8b693646{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b69365a{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b69365b{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b693664{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b693665{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b69366e{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b69366f{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b693678{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b693679{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b693682{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b693683{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b69368c{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b69368d{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b693696{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b693697{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936a0{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936aa{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936ab{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936b4{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936be{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936bf{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936c8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936c9{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8b6936d2{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-8b77bdce">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-8b6936c9"><p class="cl-8b688606"><span class="cl-8b686248">Characteristic</span></p></td>
<td class="cl-8b6936d2"><p class="cl-8b68861a"><span class="cl-8b686248">N = 614</span><span class="cl-8b68625c">1</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69365a"><p class="cl-8b68861b"><span class="cl-8b686266">Hep b rdt</span></p></td>
<td class="cl-8b693646"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">149 (91%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Positive</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">14 (8.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">451</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69365a"><p class="cl-8b68861b"><span class="cl-8b686266">Hep c rdt</span></p></td>
<td class="cl-8b693646"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">160 (99%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Positive</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">2 (1.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">452</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69365a"><p class="cl-8b68861b"><span class="cl-8b686266">Hep e rdt</span></p></td>
<td class="cl-8b693646"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">97 (58%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Positive</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">70 (42%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693665"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366e"><p class="cl-8b68862e"><span class="cl-8b686266">447</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69365a"><p class="cl-8b68861b"><span class="cl-8b686266">Test hepatitis a</span></p></td>
<td class="cl-8b693646"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">16 (100%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">598</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69365a"><p class="cl-8b68861b"><span class="cl-8b686266">Test hepatitis b</span></p></td>
<td class="cl-8b693646"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">15 (94%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Positive</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">1 (6.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">598</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69365a"><p class="cl-8b68861b"><span class="cl-8b686266">Test hepatitis c</span></p></td>
<td class="cl-8b693646"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">16 (100%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">598</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693682"><p class="cl-8b68861b"><span class="cl-8b686266">Test hepatitis e igm</span></p></td>
<td class="cl-8b693679"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">15 (32%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Positive</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">32 (68%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">567</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693682"><p class="cl-8b68861b"><span class="cl-8b686266">Test hepatitis e genotype</span></p></td>
<td class="cl-8b693679"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Positive</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">2 (100%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">612</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69365a"><p class="cl-8b68861b"><span class="cl-8b686266">Test hepatitis e virus</span></p></td>
<td class="cl-8b693646"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg-/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">5 (11%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg-/igm+</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">10 (21%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg+/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">4 (8.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg+/igm+</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">21 (45%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">6 (13%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Positive</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">1 (2.1%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">567</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69368c"><p class="cl-8b68861b"><span class="cl-8b686266">Malaria rdt at admission</span></p></td>
<td class="cl-8b693683"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">108 (60%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Positive</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">71 (40%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b69368d"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b693696"><p class="cl-8b68862e"><span class="cl-8b686266">435</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693682"><p class="cl-8b68861b"><span class="cl-8b686266">Dengue</span></p></td>
<td class="cl-8b693679"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg-/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">6 (40%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg+/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">8 (53%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg±/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">1 (6.7%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">599</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693697"><p class="cl-8b68861b"><span class="cl-8b686266">Yellow fever</span></p></td>
<td class="cl-8b6936a0"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg-/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">11 (73%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg+/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">4 (27%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">599</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68861b"><span class="cl-8b686266">Chikungunya onyongnyong</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg-/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">13 (87%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Igg+/igm-</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">2 (13%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693678"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b69366f"><p class="cl-8b68862e"><span class="cl-8b686266">599</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b6936ab"><p class="cl-8b68861b"><span class="cl-8b686266">Other arthropod transmitted virus</span></p></td>
<td class="cl-8b6936aa"><p class="cl-8b68862e"><span class="cl-8b686266"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b693664"><p class="cl-8b68864c"><span class="cl-8b686266">Negative</span></p></td>
<td class="cl-8b69365b"><p class="cl-8b68862e"><span class="cl-8b686266">15 (100%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8b6936be"><p class="cl-8b68864c"><span class="cl-8b686266">Unknown</span></p></td>
<td class="cl-8b6936b4"><p class="cl-8b68862e"><span class="cl-8b686266">599</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="2" class="cl-8b6936bf"><p class="cl-8b68864d"><span class="cl-8b686270">1</span><span class="cl-8b686266">n (%)</span></p></td></tr></tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="ad17b7a9-10fb-4f40-b713-ba0915c7c308"></div>
<script>
var dest = document.getElementById("ad17b7a9-10fb-4f40-b713-ba0915c7c308");
var template = document.getElementById("fc47493a-bf45-4857-acec-f3f2c8947d4d");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>The step in data cleaning where we converted 0, 1, “yes”, “pos”,
“neg”, etc. to standardized “Positive” and “Negative” was crucial
towards making this table readable.</p>
</div>
<div class="section level4">
<h4 id="case-fatality-ratio-cfr">Case Fatality Ratio (CFR)<a class="anchor" aria-label="anchor" href="#case-fatality-ratio-cfr"></a>
</h4>
<p>The opening text of this chunk with in-line code must be edited to
match our Am Timan data. The second in-line code references the variable
<code>exit_status</code> - <strong>this must now reference the variable
<code>exit_status2</code></strong>. Also, we do not have “Dead on
Arrival” recorded in our dataset, so <strong>that part of the sentence
should be deleted</strong>.</p>
<p>Likewise, <strong>the code section on time-to-death does not apply to
our dataset and should be deleted.</strong></p>
<p>Overall CFR is produced with the code below. Note the following:</p>
<ul>
<li>This code requires the variable <code>patient_facility_type</code>,
that it has a value “Inpatient”, and the <code>DIED</code>
variable.<br>
</li>
<li>A filter is applied that restricts this table to Inpatient
observations only.<br>
</li>
<li>The function <code><a href="../reference/add_ar.html">add_cfr()</a></code> from the package {epitabulate}
modifies the table to include the CFR.</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use arguments from above to produce overal CFR</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">patient_facility_type</span> <span class="op">==</span> <span class="st">"Inpatient"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">DIED</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">gtsummary</span><span class="fu">::</span><span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/tbl_summary.html" class="external-link">tbl_summary</a></span><span class="op">(</span></span>
<span>    statistic <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="st">"{N}"</span>,</span>
<span>    label <span class="op">=</span> <span class="va">DIED</span> <span class="op">~</span> <span class="st">"Inpatients"</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">modify_header</span><span class="op">(</span>stat_0 <span class="op">=</span> <span class="st">"Cases (N)"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Use wrapper function to calculate cfr</span></span>
<span>  <span class="fu">epitabulate</span><span class="fu">::</span><span class="fu"><a href="https://R4EPI.github.io/epitabulate/reference/gtsummary_wrappers.html" class="external-link">add_cfr</a></span><span class="op">(</span>deaths_var <span class="op">=</span> <span class="st">"DIED"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## make variable names bold </span></span>
<span>  <span class="fu">bold_labels</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="7966ee01-9d11-4961-beca-78bed6f83575"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-8ca0092c{table-layout:auto;width:0%;}.cl-8c91d50a{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8c91d51e{font-family:'Arial';font-size:6.6pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8c91d528{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8c91d532{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8c91fcc4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8c91fcd8{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8c91fce2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8c91fcec{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8c91fced{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8c91fcf6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8c929e9a{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929eae{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929eb8{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929ec2{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929ecc{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929ed6{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929ee0{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929eea{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929ef4{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929ef5{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929efe{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f08{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f09{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f12{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f13{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f26{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f27{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f30{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f4e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8c929f58{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-8ca0092c">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-8c929f58"><p class="cl-8c91fcc4"><span class="cl-8c91d50a">Characteristic</span></p></td>
<td class="cl-8c929f27"><p class="cl-8c91fcd8"><span class="cl-8c91d50a">Cases (N)</span><span class="cl-8c91d51e">1</span></p></td>
<td class="cl-8c929f30"><p class="cl-8c91fcd8"><span class="cl-8c91d50a">Deaths</span></p></td>
<td class="cl-8c929f4e"><p class="cl-8c91fcd8"><span class="cl-8c91d50a">CFR (%)</span></p></td>
<td class="cl-8c929f26"><p class="cl-8c91fcd8"><span class="cl-8c91d50a">95%CI</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-8c929ecc"><p class="cl-8c91fce2"><span class="cl-8c91d50a">Inpatients</span></p></td>
<td class="cl-8c929eae"><p class="cl-8c91fcec"><span class="cl-8c91d528">45</span></p></td>
<td class="cl-8c929eb8"><p class="cl-8c91fcec"><span class="cl-8c91d528">8</span></p></td>
<td class="cl-8c929ec2"><p class="cl-8c91fcec"><span class="cl-8c91d528">17.78</span></p></td>
<td class="cl-8c929e9a"><p class="cl-8c91fcec"><span class="cl-8c91d528">(9.29--31.33)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8c929ef5"><p class="cl-8c91fced"><span class="cl-8c91d528">Unknown</span></p></td>
<td class="cl-8c929ee0"><p class="cl-8c91fcec"><span class="cl-8c91d528">14</span></p></td>
<td class="cl-8c929eea"><p class="cl-8c91fcec"><span class="cl-8c91d528"></span></p></td>
<td class="cl-8c929ef4"><p class="cl-8c91fcec"><span class="cl-8c91d528"></span></p></td>
<td class="cl-8c929ed6"><p class="cl-8c91fcec"><span class="cl-8c91d528"></span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-8c929f13"><p class="cl-8c91fcf6"><span class="cl-8c91d532">1</span><span class="cl-8c91d528">N</span></p></td></tr></tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="594026f2-c74e-42e5-8ebd-7fcb15e735dd"></div>
<script>
var dest = document.getElementById("594026f2-c74e-42e5-8ebd-7fcb15e735dd");
var template = document.getElementById("7966ee01-9d11-4961-beca-78bed6f83575");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>The next code adds the <code>include = "sex"</code> argument to
<code>tbl_summary()</code> (which stratifies the CFR by sex).</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">patient_facility_type</span> <span class="op">==</span> <span class="st">"Inpatient"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">DIED</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>sex <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html" class="external-link">fct_explicit_na</a></span><span class="op">(</span><span class="va">sex</span>, <span class="st">"Missing"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">gtsummary</span><span class="fu">::</span><span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/tbl_summary.html" class="external-link">tbl_summary</a></span><span class="op">(</span></span>
<span>    include <span class="op">=</span> <span class="va">sex</span>,</span>
<span>    statistic <span class="op">=</span> <span class="va">sex</span> <span class="op">~</span> <span class="st">"{n}"</span>,</span>
<span>    label <span class="op">=</span> <span class="va">sex</span> <span class="op">~</span> <span class="st">"Gender"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">modify_header</span><span class="op">(</span>stat_0 <span class="op">=</span> <span class="st">"Cases (N)"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># Use wrapper function to calculate cfr</span></span>
<span>  <span class="fu">epitabulate</span><span class="fu">::</span><span class="fu"><a href="https://R4EPI.github.io/epitabulate/reference/gtsummary_wrappers.html" class="external-link">add_cfr</a></span><span class="op">(</span>deaths_var <span class="op">=</span> <span class="st">"DIED"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make variable names bold </span></span>
<span>  <span class="fu">bold_labels</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="24124630-34b7-499a-9c26-28d2e6f80699"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-8dd08920{table-layout:auto;width:0%;}.cl-8dbe18da{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8dbe18f8{font-family:'Arial';font-size:6.6pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8dbe1902{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8dbe1903{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8dbe4328{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8dbe433c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8dbe4346{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8dbe4350{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8dbe435a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8dbe435b{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8dbecdc0{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbecdca{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbecdd4{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbecdd5{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbecde8{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbecde9{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbecdf2{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbecdf3{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbecdfc{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece06{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece07{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece08{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece10{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece11{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece1a{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece24{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece25{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece2e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece38{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece39{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece42{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece4c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece4d{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece56{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8dbece57{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-8dd08920">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-8dbece56"><p class="cl-8dbe4328"><span class="cl-8dbe18da">Characteristic</span></p></td>
<td class="cl-8dbece57"><p class="cl-8dbe433c"><span class="cl-8dbe18da">Cases (N)</span><span class="cl-8dbe18f8">1</span></p></td>
<td class="cl-8dbece4d"><p class="cl-8dbe433c"><span class="cl-8dbe18da">Deaths</span></p></td>
<td class="cl-8dbece4c"><p class="cl-8dbe433c"><span class="cl-8dbe18da">CFR (%)</span></p></td>
<td class="cl-8dbece42"><p class="cl-8dbe433c"><span class="cl-8dbe18da">95%CI</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-8dbecdd5"><p class="cl-8dbe4346"><span class="cl-8dbe18da">Gender</span></p></td>
<td class="cl-8dbecde8"><p class="cl-8dbe4350"><span class="cl-8dbe1902"></span></p></td>
<td class="cl-8dbecdd4"><p class="cl-8dbe4350"><span class="cl-8dbe1902"></span></p></td>
<td class="cl-8dbecdca"><p class="cl-8dbe4350"><span class="cl-8dbe1902"></span></p></td>
<td class="cl-8dbecdc0"><p class="cl-8dbe4350"><span class="cl-8dbe1902"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8dbecdfc"><p class="cl-8dbe435a"><span class="cl-8dbe1902">F</span></p></td>
<td class="cl-8dbece06"><p class="cl-8dbe4350"><span class="cl-8dbe1902">36</span></p></td>
<td class="cl-8dbecdf3"><p class="cl-8dbe4350"><span class="cl-8dbe1902">6</span></p></td>
<td class="cl-8dbecdf2"><p class="cl-8dbe4350"><span class="cl-8dbe1902">23.08</span></p></td>
<td class="cl-8dbecde9"><p class="cl-8dbe4350"><span class="cl-8dbe1902">(11.03--42.05)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8dbece11"><p class="cl-8dbe435a"><span class="cl-8dbe1902">M</span></p></td>
<td class="cl-8dbece1a"><p class="cl-8dbe4350"><span class="cl-8dbe1902">23</span></p></td>
<td class="cl-8dbece10"><p class="cl-8dbe4350"><span class="cl-8dbe1902">2</span></p></td>
<td class="cl-8dbece08"><p class="cl-8dbe4350"><span class="cl-8dbe1902">10.53</span></p></td>
<td class="cl-8dbece07"><p class="cl-8dbe4350"><span class="cl-8dbe1902">(2.94--31.39)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-8dbece38"><p class="cl-8dbe435b"><span class="cl-8dbe1903">1</span><span class="cl-8dbe1902">n</span></p></td></tr></tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="71e8644a-75d7-469f-bf5f-4066bf16ea18"></div>
<script>
var dest = document.getElementById("71e8644a-75d7-469f-bf5f-4066bf16ea18");
var template = document.getElementById("24124630-34b7-499a-9c26-28d2e6f80699");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>This table shows the CFR by age group. Note how the
<code>include =</code> argument is now assigned to
<code>age_group</code>.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">patient_facility_type</span> <span class="op">==</span> <span class="st">"Inpatient"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">DIED</span>, <span class="va">age_group</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">gtsummary</span><span class="fu">::</span><span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/tbl_summary.html" class="external-link">tbl_summary</a></span><span class="op">(</span></span>
<span>    include <span class="op">=</span> <span class="va">age_group</span>,</span>
<span>    statistic <span class="op">=</span> <span class="va">age_group</span> <span class="op">~</span> <span class="st">"{n}"</span>,</span>
<span>    missing <span class="op">=</span> <span class="st">"no"</span>,</span>
<span>    label <span class="op">=</span> <span class="va">age_group</span> <span class="op">~</span> <span class="st">"Age group"</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">modify_header</span><span class="op">(</span>stat_0 <span class="op">=</span> <span class="st">"Cases (N)"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Use wrapper function to calculate cfr</span></span>
<span>  <span class="fu"><a href="../reference/add_ar.html">add_cfr</a></span><span class="op">(</span>deaths_var <span class="op">=</span> <span class="st">"DIED"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make variable names bold </span></span>
<span>  <span class="fu">bold_labels</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="893d7298-2784-4a81-841f-92a78a6a4c32"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-8f00c6de{table-layout:auto;width:0%;}.cl-8ef139ee{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8ef13a02{font-family:'Arial';font-size:6.6pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8ef13a16{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8ef13a20{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-8ef16018{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8ef16022{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8ef1602c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8ef16040{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8ef16041{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8ef1604a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8ef1faa0{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fab4{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fafa{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fafb{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb0e{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb0f{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb22{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb36{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb37{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb4a{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb4b{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb54{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb55{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb5e{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb68{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb69{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb72{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb7c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb7d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb86{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb87{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb90{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb9a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fb9b{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8ef1fba4{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-8f00c6de">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-8ef1fba4"><p class="cl-8ef16018"><span class="cl-8ef139ee">Characteristic</span></p></td>
<td class="cl-8ef1fb87"><p class="cl-8ef16022"><span class="cl-8ef139ee">Cases (N)</span><span class="cl-8ef13a02">1</span></p></td>
<td class="cl-8ef1fb9b"><p class="cl-8ef16022"><span class="cl-8ef139ee">Deaths</span></p></td>
<td class="cl-8ef1fb9a"><p class="cl-8ef16022"><span class="cl-8ef139ee">CFR (%)</span></p></td>
<td class="cl-8ef1fb90"><p class="cl-8ef16022"><span class="cl-8ef139ee">95%CI</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-8ef1fab4"><p class="cl-8ef1602c"><span class="cl-8ef139ee">Age group</span></p></td>
<td class="cl-8ef1fb0e"><p class="cl-8ef16040"><span class="cl-8ef13a16"></span></p></td>
<td class="cl-8ef1fafb"><p class="cl-8ef16040"><span class="cl-8ef13a16"></span></p></td>
<td class="cl-8ef1fafa"><p class="cl-8ef16040"><span class="cl-8ef13a16"></span></p></td>
<td class="cl-8ef1faa0"><p class="cl-8ef16040"><span class="cl-8ef13a16"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8ef1fb37"><p class="cl-8ef16041"><span class="cl-8ef13a16">0-1</span></p></td>
<td class="cl-8ef1fb22"><p class="cl-8ef16040"><span class="cl-8ef13a16">5</span></p></td>
<td class="cl-8ef1fb4a"><p class="cl-8ef16040"><span class="cl-8ef13a16">2</span></p></td>
<td class="cl-8ef1fb36"><p class="cl-8ef16040"><span class="cl-8ef13a16">40.00</span></p></td>
<td class="cl-8ef1fb0f"><p class="cl-8ef16040"><span class="cl-8ef13a16">(11.76--76.93)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8ef1fb37"><p class="cl-8ef16041"><span class="cl-8ef13a16">2-14</span></p></td>
<td class="cl-8ef1fb22"><p class="cl-8ef16040"><span class="cl-8ef13a16">14</span></p></td>
<td class="cl-8ef1fb4a"><p class="cl-8ef16040"><span class="cl-8ef13a16">1</span></p></td>
<td class="cl-8ef1fb36"><p class="cl-8ef16040"><span class="cl-8ef13a16">9.09</span></p></td>
<td class="cl-8ef1fb0f"><p class="cl-8ef16040"><span class="cl-8ef13a16">(1.62--37.74)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8ef1fb37"><p class="cl-8ef16041"><span class="cl-8ef13a16">15-29</span></p></td>
<td class="cl-8ef1fb22"><p class="cl-8ef16040"><span class="cl-8ef13a16">23</span></p></td>
<td class="cl-8ef1fb4a"><p class="cl-8ef16040"><span class="cl-8ef13a16">2</span></p></td>
<td class="cl-8ef1fb36"><p class="cl-8ef16040"><span class="cl-8ef13a16">11.76</span></p></td>
<td class="cl-8ef1fb0f"><p class="cl-8ef16040"><span class="cl-8ef13a16">(3.29--34.34)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8ef1fb37"><p class="cl-8ef16041"><span class="cl-8ef13a16">30-44</span></p></td>
<td class="cl-8ef1fb22"><p class="cl-8ef16040"><span class="cl-8ef13a16">15</span></p></td>
<td class="cl-8ef1fb4a"><p class="cl-8ef16040"><span class="cl-8ef13a16">2</span></p></td>
<td class="cl-8ef1fb36"><p class="cl-8ef16040"><span class="cl-8ef13a16">20.00</span></p></td>
<td class="cl-8ef1fb0f"><p class="cl-8ef16040"><span class="cl-8ef13a16">(5.67--50.98)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-8ef1fb4b"><p class="cl-8ef16041"><span class="cl-8ef13a16">45+</span></p></td>
<td class="cl-8ef1fb68"><p class="cl-8ef16040"><span class="cl-8ef13a16">2</span></p></td>
<td class="cl-8ef1fb55"><p class="cl-8ef16040"><span class="cl-8ef13a16">1</span></p></td>
<td class="cl-8ef1fb5e"><p class="cl-8ef16040"><span class="cl-8ef13a16">50.00</span></p></td>
<td class="cl-8ef1fb54"><p class="cl-8ef16040"><span class="cl-8ef13a16">(9.45--90.55)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-8ef1fb69"><p class="cl-8ef1604a"><span class="cl-8ef13a20">1</span><span class="cl-8ef13a16">n</span></p></td></tr></tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="11207c09-367c-4e2e-8135-e9dfc98af08e"></div>
<script>
var dest = document.getElementById("11207c09-367c-4e2e-8135-e9dfc98af08e");
var template = document.getElementById("893d7298-2784-4a81-841f-92a78a6a4c32");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>The commented code below examines <strong>CFR by case
definition</strong>. Note that this is dependent upon our working
<code>case_def</code> variable.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use if you have enough confirmed cases for comparative analysis </span></span>
<span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">patient_facility_type</span> <span class="op">==</span> <span class="st">"Inpatient"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">DIED</span>, <span class="va">case_def</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">gtsummary</span><span class="fu">::</span><span class="fu"><a href="https://www.danieldsjoberg.com/gtsummary/reference/tbl_summary.html" class="external-link">tbl_summary</a></span><span class="op">(</span></span>
<span>    include <span class="op">=</span> <span class="va">case_def</span>,</span>
<span>    statistic <span class="op">=</span> <span class="va">case_def</span> <span class="op">~</span> <span class="st">"{n}"</span>,</span>
<span>    missing <span class="op">=</span> <span class="st">"no"</span>,</span>
<span>    label <span class="op">=</span> <span class="va">case_def</span> <span class="op">~</span> <span class="st">"Case definition"</span></span>
<span>    <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">modify_header</span><span class="op">(</span>stat_0 <span class="op">=</span> <span class="st">"Cases (N)"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Use wrapper function to calculate cfr</span></span>
<span>  <span class="fu"><a href="../reference/add_ar.html">add_cfr</a></span><span class="op">(</span>deaths_var <span class="op">=</span> <span class="st">"DIED"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make variable names bold </span></span>
<span>  <span class="fu">bold_labels</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="dabf18d3-dedb-4afc-94b6-8aeafd7a0e8b"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-902eb9c6{table-layout:auto;width:0%;}.cl-901f4946{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-901f495a{font-family:'Arial';font-size:6.6pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-901f496e{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-901f496f{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-901f6c82{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-901f6c96{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-901f6c97{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-901f6caa{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-901f6cab{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-901f6cb4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-90201718{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9020172c{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201736{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9020174a{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9020175e{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201768{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201790{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9020179a{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-902017d6{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-902017d7{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-902017fe{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201808{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201809{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9020181c{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201826{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201830{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9020183a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201844{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9020184e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201858{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201859{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201862{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201876{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-90201880{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9020188a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-902eb9c6">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-90201880"><p class="cl-901f6c82"><span class="cl-901f4946">Characteristic</span></p></td>
<td class="cl-9020188a"><p class="cl-901f6c96"><span class="cl-901f4946">Cases (N)</span><span class="cl-901f495a">1</span></p></td>
<td class="cl-90201876"><p class="cl-901f6c96"><span class="cl-901f4946">Deaths</span></p></td>
<td class="cl-90201862"><p class="cl-901f6c96"><span class="cl-901f4946">CFR (%)</span></p></td>
<td class="cl-90201859"><p class="cl-901f6c96"><span class="cl-901f4946">95%CI</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-9020174a"><p class="cl-901f6c97"><span class="cl-901f4946">Case definition</span></p></td>
<td class="cl-9020175e"><p class="cl-901f6caa"><span class="cl-901f496e"></span></p></td>
<td class="cl-90201736"><p class="cl-901f6caa"><span class="cl-901f496e"></span></p></td>
<td class="cl-9020172c"><p class="cl-901f6caa"><span class="cl-901f496e"></span></p></td>
<td class="cl-90201718"><p class="cl-901f6caa"><span class="cl-901f496e"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-902017d6"><p class="cl-901f6cab"><span class="cl-901f496e">Confirmed</span></p></td>
<td class="cl-902017d7"><p class="cl-901f6caa"><span class="cl-901f496e">33</span></p></td>
<td class="cl-9020179a"><p class="cl-901f6caa"><span class="cl-901f496e">5</span></p></td>
<td class="cl-90201790"><p class="cl-901f6caa"><span class="cl-901f496e">20.83</span></p></td>
<td class="cl-90201768"><p class="cl-901f6caa"><span class="cl-901f496e">(9.24--40.47)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-9020181c"><p class="cl-901f6cab"><span class="cl-901f496e">Suspected</span></p></td>
<td class="cl-90201826"><p class="cl-901f6caa"><span class="cl-901f496e">26</span></p></td>
<td class="cl-90201809"><p class="cl-901f6caa"><span class="cl-901f496e">3</span></p></td>
<td class="cl-90201808"><p class="cl-901f6caa"><span class="cl-901f496e">14.29</span></p></td>
<td class="cl-902017fe"><p class="cl-901f6caa"><span class="cl-901f496e">(4.98--34.64)</span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-9020184e"><p class="cl-901f6cb4"><span class="cl-901f496f">1</span><span class="cl-901f496e">n</span></p></td></tr></tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="ecb0fdb3-66fe-416e-a884-5b6b26421e42"></div>
<script>
var dest = document.getElementById("ecb0fdb3-66fe-416e-a884-5b6b26421e42");
var template = document.getElementById("dabf18d3-dedb-4afc-94b6-8aeafd7a0e8b");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>
</div>
<div class="section level4">
<h4 id="attack-rate">Attack Rate<a class="anchor" aria-label="anchor" href="#attack-rate"></a>
</h4>
<p>To use the attack rate section, we need to create an object
<code>population</code> from the sum of population counts in the
population figures. <strong>Because we only imported region-based
population counts, we must change this command</strong> to reflect that
we do not have <code>population_data_age</code>, but rather
<code>population_data_region</code>.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># OLD command from template </span></span>
<span><span class="co"># population &lt;- sum(population_data_age$population)</span></span></code></pre></div>
<p>Running the correct command and printing the value of population, we
see that the sum population across regions is estimated to be 62336.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CORRECTED command for Am Timan exercise</span></span>
<span><span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">population_data_region</span><span class="op">$</span><span class="va">population</span><span class="op">)</span></span>
<span></span>
<span><span class="va">population</span></span>
<span><span class="co">#&gt; [1] 62336</span></span></code></pre></div>
<p>The first line of code below creates a multi-part object
<code>ar</code> with the number of cases, population, attack rate per
10,000, and lower and upper confidence intervals (you can run just this
line to verify yourself). This function comes from our package {sitrep}.
The subsequent commands alter the aesthetics of to produce a neat table
with appropriate column names.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the attack rate information and store them in object "ar""</span></span>
<span><span class="va">ar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epikit-exports.html">attack_rate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">)</span>, <span class="va">population</span>, multiplier <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print the table</span></span>
<span><span class="va">ar</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/epikit-exports.html">merge_ci_df</a></span><span class="op">(</span>e <span class="op">=</span> <span class="fl">3</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># merge the lower and upper CI into one column</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span><span class="st">"Cases (n)"</span> <span class="op">=</span> <span class="va">cases</span>, </span>
<span>         <span class="st">"Population"</span> <span class="op">=</span> <span class="va">population</span>, </span>
<span>         <span class="st">"AR (per 10,000)"</span> <span class="op">=</span> <span class="va">ar</span>, </span>
<span>         <span class="st">"95%CI"</span> <span class="op">=</span> <span class="va">ci</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># produce styled output table with auto-adjusted column widths with {flextable}</span></span>
<span>  <span class="fu">qflextable</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## set to only show 1 decimal place </span></span>
<span>  <span class="fu">colformat_double</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<template id="18fdb06c-0a37-43d9-823d-17cc14421b35"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-9091638c{table-layout:auto;width:0%;}.cl-90846498{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-908464b6{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9084869e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-908486a8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9084d6a8{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9084d6bc{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9084d6c6{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9084d6d0{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9084d6d1{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9084d6da{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9084d6db{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9084d6e4{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-9091638c">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-9084d6db"><p class="cl-9084869e"><span class="cl-90846498">Cases (n)</span></p></td>
<td class="cl-9084d6e4"><p class="cl-9084869e"><span class="cl-90846498">Population</span></p></td>
<td class="cl-9084d6da"><p class="cl-9084869e"><span class="cl-90846498">AR (per 10,000)</span></p></td>
<td class="cl-9084d6d1"><p class="cl-908486a8"><span class="cl-90846498">95%CI</span></p></td>
</tr></thead>
<tbody><tr style="overflow-wrap:break-word;">
<td class="cl-9084d6c6"><p class="cl-9084869e"><span class="cl-908464b6">614</span></p></td>
<td class="cl-9084d6d0"><p class="cl-9084869e"><span class="cl-908464b6">62,336.0</span></p></td>
<td class="cl-9084d6bc"><p class="cl-9084869e"><span class="cl-908464b6">98.5</span></p></td>
<td class="cl-9084d6a8"><p class="cl-908486a8"><span class="cl-908464b6">(91.0--106.6)</span></p></td>
</tr></tbody>
</table>
</div></template><div class="flextable-shadow-host" id="453986bb-1470-4e3e-ad2e-f822e8233468"></div>
<script>
var dest = document.getElementById("453986bb-1470-4e3e-ad2e-f822e8233468");
var template = document.getElementById("18fdb06c-0a37-43d9-823d-17cc14421b35");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>We are unable to calculate the attack rate by age group, because we
do not have population counts for each age group. <strong>Comment out
(#) this code.</strong></p>
<p>Mortality attributable to AJS is also not appropriate for this
example. <strong>Comment out (#) the 4 related code chunks.</strong></p>
</div>
</div>
<div class="section level3">
<h3 id="time">Time<a class="anchor" aria-label="anchor" href="#time"></a>
</h3>
<p>The next section of the template produces analyses and outputs
related to time, such as epidemic curves.</p>
<p>The first in-line code sentence clearly states how many cases are
missing date of onset, as this is important to be able to correctly
interpret the epidemic curve.</p>
<div class="section level4">
<h4 id="epidemic-curve">Epidemic curve<a class="anchor" aria-label="anchor" href="#epidemic-curve"></a>
</h4>
<p>The <code>basic_curve</code> epidemic curve is achieved using
<code>ggplot()</code> and <code>geom_bar()</code> on the case
linelist.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## make plot</span></span>
<span><span class="va">basic_curve</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">epiweek_date</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="co">## plot those not missing using the date variable </span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">epiweek_date</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## plot as a bar</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">7</span>,</span>
<span>           fill <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>           colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## align plot with bottom of plot</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## control x-axis breaks and display</span></span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="va">all_weeks_date</span>,</span>
<span>    labels <span class="op">=</span> <span class="va">all_weeks</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co">## use pre-defined labels</span></span>
<span>  <span class="va">epicurve_labels</span> <span class="op">+</span></span>
<span>  <span class="co">## use pre-defined theme (design) settings</span></span>
<span>  <span class="va">epicurve_theme</span></span>
<span></span>
<span><span class="co"># show your plot (stored for later use) </span></span>
<span><span class="va">basic_curve</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/epicurve-1.png" width="576"></p>
<p>This x-axis is difficult to read with every week displayed. To
increase readability we can uncomment and use the helper code at the
bottom of that code chunk. This modifies the already-defined
<code>basic_curve</code> object (with a <code>+</code>) to specify that
the x-axis shows only a specified number of breaks/dates (in this case
6). Note: A warning that a scale for x is being replaced is okay.</p>
<p>The data are still shown by week - it is only the labels on the scale
that have changed.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Modifies basic_curve to show only 6 breaks in the x-axis </span></span>
<span><span class="va">basic_curve</span> <span class="op">+</span> <span class="fu">scale_x_date</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"3 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b %Y"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-56-1.png" width="576"></p>
<p>An in-line code sentence then calculates and prints the week of the
peak of the outbreak.</p>
</div>
<div class="section level4">
<h4 id="moving-average">Moving average<a class="anchor" aria-label="anchor" href="#moving-average"></a>
</h4>
<p>The next code chunk uses the {slider} function to calculate a moving
average (mean) of number of cases in the two weeks prior, plotted as a
line on top of the epidemic curve. You can adjust the window in the top
line of this chunk (default set to 14 days).</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## define the width of the moving average window here</span></span>
<span><span class="va">moving_window_days</span> <span class="op">&lt;-</span> <span class="fl">14</span></span>
<span></span>
<span><span class="co">## calculates the moving average using counts by epiweek</span></span>
<span><span class="va">moving_avg</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## count cases by epiweek</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">epiweek_date</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## create column with sliding window for day and window prior</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>indexed_window <span class="op">=</span> <span class="fu">slider</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/slider/man/slide_index.html" class="external-link">slide_index_dbl</a></span><span class="op">(</span></span>
<span>    <span class="va">n</span>,                       <span class="co"># calculate on new_cases</span></span>
<span>    .i <span class="op">=</span> <span class="va">epiweek_date</span>,       <span class="co"># indexed with epiweek_date </span></span>
<span>    .f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,     <span class="co"># function is mean() with missing values removed</span></span>
<span>    .before <span class="op">=</span> <span class="fu">days</span><span class="op">(</span><span class="va">moving_window_days</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## create plot</span></span>
<span><span class="va">moving_plot</span> <span class="op">&lt;-</span>  <span class="va">basic_curve</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>data <span class="op">=</span> <span class="va">moving_avg</span>,</span>
<span>       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">epiweek_date</span>, y <span class="op">=</span> <span class="va">indexed_window</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># adjust title and subtitle for this particular plot</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="fu">str_glue</span><span class="op">(</span><span class="st">"Cases by date of onset"</span><span class="op">)</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="fu">str_glue</span><span class="op">(</span><span class="st">"{moving_window_days}-day moving average</span></span>
<span><span class="st">                           Source: MSF data from {reporting_week}"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># show your plot (stored for later use) </span></span>
<span><span class="va">moving_plot</span> <span class="op">+</span> <span class="fu">scale_x_date</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"3 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b %Y"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/epicurve_moving-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="biweekly-epicurve">Biweekly epicurve<a class="anchor" aria-label="anchor" href="#biweekly-epicurve"></a>
</h4>
<p>A biweekly epidemic curve can be produces using the next code chunk.
In the first step, the linelist is aggregated into weekly counts and
then a biweekly sum is created using {slider}. Finally, In the
<code>geom_bar()</code> function, the <code>width =</code> argument is
set to equal <code>14</code> (days).</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## calculates the moving sum using counts by epiweek</span></span>
<span><span class="va">moving_sum</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## count cases by date of onset</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">epiweek_date</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>biweekly <span class="op">=</span> <span class="fu">slide_sum</span><span class="op">(</span>x <span class="op">=</span> <span class="va">n</span>, </span>
<span>            after <span class="op">=</span> <span class="fl">1</span>, </span>
<span>            step <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">biweekly</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">moving_sum</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">epiweek_date</span>, y <span class="op">=</span> <span class="va">biweekly</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## plot as a bar</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span></span>
<span>    <span class="co">## use the count we calculated above</span></span>
<span>    stat <span class="op">=</span> <span class="st">"identity"</span>, </span>
<span>    <span class="co">## make each bar two weeks wide</span></span>
<span>    width <span class="op">=</span> <span class="fl">14</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## align plot with bottom of plot</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## control x-axis breaks and display</span></span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="va">all_weeks_date</span>,</span>
<span>    labels <span class="op">=</span> <span class="va">all_weeks</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co">## use pre-defined labels</span></span>
<span>  <span class="va">epicurve_labels</span> <span class="op">+</span></span>
<span>  <span class="co">## use pre-defined theme (design) settings</span></span>
<span>  <span class="va">epicurve_theme</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"3 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b %Y"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/biweekly_epicurve-1.png" width="576"></p>
<p>Using the next code chunk, you can group the data in the epidemic
curve by the values in <code>sex</code>, thus producing a “stacked”
epidemic curve. You can also change out <code>sex</code> for another
column.</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># get counts by gender</span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">epiweek_date</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">## plot those not missing using the date variable </span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">epiweek_date</span>, fill <span class="op">=</span> <span class="fu">fct_rev</span><span class="op">(</span><span class="fu">fct_explicit_na</span><span class="op">(</span><span class="va">sex</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## plot as a bar</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">7</span>,</span>
<span>           colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># align plot with bottom of plot</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># control x-axis breaks and display</span></span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="va">all_weeks_date</span>,</span>
<span>    labels <span class="op">=</span> <span class="va">all_weeks</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># use pre-defined labels</span></span>
<span>  <span class="va">epicurve_labels</span> <span class="op">+</span></span>
<span>  <span class="co"># use pre-defined theme (design) settings</span></span>
<span>  <span class="va">epicurve_theme</span> <span class="op">+</span> </span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"3 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b %Y"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/incidence_by_gender-1.png" width="576"></p>
<p>Such as by, <code>case_def</code>:</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">epiweek_date</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="co">## plot those not missing using the date variable </span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">epiweek_date</span>, fill <span class="op">=</span> <span class="fu">fct_rev</span><span class="op">(</span><span class="fu">fct_explicit_na</span><span class="op">(</span><span class="va">case_def</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## plot as a bar</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">7</span>,</span>
<span>           colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># align plot with bottom of plot</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># control x-axis breaks and display</span></span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="va">all_weeks_date</span>,</span>
<span>    labels <span class="op">=</span> <span class="va">all_weeks</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># use pre-defined labels</span></span>
<span>  <span class="va">epicurve_labels</span> <span class="op">+</span></span>
<span>  <span class="co"># use pre-defined theme (design) settings</span></span>
<span>  <span class="va">epicurve_theme</span> <span class="op">+</span> </span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"3 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b %Y"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/incidence_by_case_def-1.png" width="576"></p>
<p>Remember also that you can limit the entire plot to a subset of
observations by first filtering the dataset and passing the result to
the <code>ggplot()</code> function, as is done in the above examples
filtering to remove rows with a missing <code>epiweek_date</code>
value.</p>
</div>
<div class="section level4">
<h4 id="analysis-of-other-indicators-by-time">Analysis of other indicators by time<a class="anchor" aria-label="anchor" href="#analysis-of-other-indicators-by-time"></a>
</h4>
<p>The chunk <code>attack_rate_per_week</code> does not produce an
epidemic curve, but does print a table of the the attack rate by week.
This table could be very long if your epidemic is protracted, so you may
choose to use a different unit of time than week.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># counts and cumulative counts by week</span></span>
<span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">date_of_onset</span><span class="op">)</span> <span class="op">%&gt;%</span>        <span class="co"># arrange by date of onset</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">epiweek</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># count all epiweeks and include zero counts</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>cumulative <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>    <span class="co"># add a cumulative sum</span></span>
<span></span>
<span></span>
<span><span class="co"># attack rate for each week</span></span>
<span><span class="va">ar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epikit-exports.html">attack_rate</a></span><span class="op">(</span><span class="va">cases</span><span class="op">$</span><span class="va">n</span>, <span class="va">population</span>, multiplier <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">bind_cols</span><span class="op">(</span><span class="fu">select</span><span class="op">(</span><span class="va">cases</span>, <span class="va">epiweek</span><span class="op">)</span>, <span class="va">.</span><span class="op">)</span> <span class="co"># add the epiweek column to table</span></span>
<span></span>
<span></span>
<span><span class="va">ar</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/epikit-exports.html">merge_ci_df</a></span><span class="op">(</span>e <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># merge the lower and upper CI into one column</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span><span class="st">"Epiweek"</span> <span class="op">=</span> <span class="va">epiweek</span>, </span>
<span>         <span class="st">"Cases (n)"</span> <span class="op">=</span> <span class="va">cases</span>, </span>
<span>         <span class="st">"Population"</span> <span class="op">=</span> <span class="va">population</span>, </span>
<span>         <span class="st">"AR (per 10,000)"</span> <span class="op">=</span> <span class="va">ar</span>, </span>
<span>         <span class="st">"95%CI"</span> <span class="op">=</span> <span class="va">ci</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># produce styled output table with auto-adjusted column widths with {flextable}</span></span>
<span>  <span class="fu">qflextable</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## set to only show 1 decimal place </span></span>
<span>  <span class="fu">colformat_double</span><span class="op">(</span>j <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<template id="76663102-e656-4c43-b52b-b45834b116bd"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-92f813b4{table-layout:auto;width:0%;}.cl-92e71bea{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-92e71c08{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-92e73e22{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-92e73e2c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-92e7ee58{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7ee6c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7ee76{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7ee80{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7ee81{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7ee8a{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7ee94{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7ee9e{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7ee9f{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7eea8{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7eea9{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7eeb2{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7eebc{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7eec6{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-92e7eec7{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-92f813b4">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-92e7eec6"><p class="cl-92e73e22"><span class="cl-92e71bea">Epiweek</span></p></td>
<td class="cl-92e7eebc"><p class="cl-92e73e22"><span class="cl-92e71bea">Cases (n)</span></p></td>
<td class="cl-92e7eec7"><p class="cl-92e73e22"><span class="cl-92e71bea">Population</span></p></td>
<td class="cl-92e7eeb2"><p class="cl-92e73e22"><span class="cl-92e71bea">AR (per 10,000)</span></p></td>
<td class="cl-92e7eea9"><p class="cl-92e73e2c"><span class="cl-92e71bea">95%CI</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W23</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">1</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.2</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.03--0.91)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W29</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">1</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.2</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.03--0.91)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W30</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">2</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.3</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.09--1.17)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W33</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">3</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.5</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.16--1.42)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W34</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">7</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">1.1</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.54--2.32)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W35</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">1</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.2</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.03--0.91)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W36</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">2</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.3</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.09--1.17)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W37</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">17</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">2.7</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.70--4.37)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W38</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">12</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">1.9</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.10--3.36)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W39</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">9</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">1.4</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.76--2.74)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W40</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">10</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">1.6</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.87--2.95)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W41</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">3</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.5</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.16--1.42)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W42</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">5</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.8</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.34--1.88)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W43</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">5</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.8</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.34--1.88)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W44</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">3</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.5</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.16--1.42)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W45</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">5</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.8</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.34--1.88)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W46</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">12</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">1.9</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.10--3.36)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W47</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">13</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">2.1</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.22--3.57)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W48</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">23</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">3.7</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(2.46--5.54)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W49</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">19</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">3.0</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.95--4.76)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W50</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">35</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">5.6</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(4.04--7.81)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W51</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">22</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">3.5</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(2.33--5.34)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2016 W52</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">31</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">5.0</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(3.50--7.06)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W01</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">16</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">2.6</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.58--4.17)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W02</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">22</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">3.5</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(2.33--5.34)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W03</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">14</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">2.2</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.34--3.77)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W04</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">20</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">3.2</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(2.08--4.96)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W05</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">16</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">2.6</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.58--4.17)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W06</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">118</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">18.9</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(15.81--22.66)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W07</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">20</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">3.2</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(2.08--4.96)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W08</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">41</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">6.6</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(4.85--8.92)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W09</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">15</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">2.4</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.46--3.97)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W10</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">40</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">6.4</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(4.71--8.74)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W11</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">8</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">1.3</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.65--2.53)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W12</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">14</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">2.2</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(1.34--3.77)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W13</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">8</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">1.3</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.65--2.53)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W14</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">11</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">1.8</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.99--3.16)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee6c"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W15</span></p></td>
<td class="cl-92e7ee76"><p class="cl-92e73e22"><span class="cl-92e71c08">3</span></p></td>
<td class="cl-92e7ee58"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee80"><p class="cl-92e73e22"><span class="cl-92e71c08">0.5</span></p></td>
<td class="cl-92e7ee81"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.16--1.42)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-92e7ee9f"><p class="cl-92e73e22"><span class="cl-92e71c08">2017 W16</span></p></td>
<td class="cl-92e7ee9e"><p class="cl-92e73e22"><span class="cl-92e71c08">7</span></p></td>
<td class="cl-92e7eea8"><p class="cl-92e73e22"><span class="cl-92e71c08">62,336.0</span></p></td>
<td class="cl-92e7ee94"><p class="cl-92e73e22"><span class="cl-92e71c08">1.1</span></p></td>
<td class="cl-92e7ee8a"><p class="cl-92e73e2c"><span class="cl-92e71c08">(0.54--2.32)</span></p></td>
</tr>
</tbody>
</table>
</div></template><div class="flextable-shadow-host" id="81380849-f06a-4c0d-969c-174f5845e8f2"></div>
<script>
var dest = document.getElementById("81380849-f06a-4c0d-969c-174f5845e8f2");
var template = document.getElementById("76663102-e656-4c43-b52b-b45834b116bd");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>The next chunks offers a similar calculation, but for cumulative
attack rate, and CFR</p>
</div>
<div class="section level4">
<h4 id="plotting-ar-cfr-and-the-epidemic-curve-togethr">Plotting AR, CFR, and the Epidemic Curve togethr<a class="anchor" aria-label="anchor" href="#plotting-ar-cfr-and-the-epidemic-curve-togethr"></a>
</h4>
<p>These code chunks produce plots of the AR (in the population), CFR
(among inpatients only), and the AF and CFR as line graphs together with
the Epidemic Curve.</p>
<p><strong>The chunk, <code>ar_line_graph</code>, prepares a plot of
attack rate by epiweek, but does not yet print it.</strong> You can
print it alone by running a command of its name
<code>ar_plot</code>.</p>
<p>This <code>ar_plot</code> depends on you having already run the
<code>attack_rate_per_week</code> chunk. If you have not, you may see
“Error: epiweek not found”</p>
<p>Each of the plots involves several steps:</p>
<ol style="list-style-type: decimal">
<li>Creating the data object e.g. <code>ar</code> or
<code>cfr</code><br>
</li>
<li>Creating the plot e.g. <code>ar_plot</code> or
<code>cfr_plot</code>
</li>
</ol>
<p>The plots are finally combined with the {patchwork} package into one
image.</p>
<p>The code below uses the <code>ar</code> object created above to
produce <em>and store</em> the AR plot.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">ar_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">ar</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">epiweek</span><span class="op">)</span>, group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># add confidence intervals as a ribbon</span></span>
<span>  <span class="fu">geom_ribbon</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">lower</span>, ymax <span class="op">=</span> <span class="va">upper</span><span class="op">)</span>, </span>
<span>              color <span class="op">=</span> <span class="st">"blue"</span>,  fill <span class="op">=</span> <span class="st">"blue"</span>, </span>
<span>              linetype <span class="op">=</span> <span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># add AR as a line</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">ar</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"blue"</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># set origin for axes</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># control x-axis breaks and display</span></span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="va">all_weeks_date</span>,</span>
<span>    labels <span class="op">=</span> <span class="va">all_weeks</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># add labels to axes and below chart</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Calendar week"</span>, y <span class="op">=</span> <span class="st">"AR [95% CI]"</span>, subtitle <span class="op">=</span> <span class="st">"Attack Rate (per 10,000)"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># change visuals of dates and remove legend title</span></span>
<span>  <span class="va">epicurve_theme</span></span></code></pre></div>
<p>Then code is run to produce <em>and store</em> the CFR plot.</p>
<p>First we make <code>cfr</code> from the
<code>linelist_cleaned</code>:</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># calculate CFR among inpatients by week</span></span>
<span><span class="va">cfr</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">patient_facility_type</span> <span class="op">==</span> <span class="st">"Inpatient"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>epiweek <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">epiweek</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/epikit-exports.html">case_fatality_rate_df</a></span><span class="op">(</span><span class="fu">str_detect</span><span class="op">(</span><span class="va">exit_status</span>, <span class="st">"Dead"</span><span class="op">)</span>, group <span class="op">=</span> <span class="va">epiweek</span><span class="op">)</span></span></code></pre></div>
<p>Then we make the plot and save it as <code>cfr_plot</code>. Note that
it is not yet printed.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">cfr_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">cfr</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu">yearweek</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">epiweek</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># add confidence intervals as a ribbon</span></span>
<span>  <span class="fu">geom_ribbon</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">lower</span>, ymax <span class="op">=</span> <span class="va">upper</span><span class="op">)</span>, </span>
<span>              color <span class="op">=</span> <span class="st">"red"</span>, fill <span class="op">=</span> <span class="st">"red"</span>, </span>
<span>              linetype <span class="op">=</span> <span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># add CFR as a line</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">cfr</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"red"</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># set origin for axes</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="co"># control x-axis breaks and display</span></span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="va">all_weeks_date</span>,</span>
<span>    labels <span class="op">=</span> <span class="va">all_weeks</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># add labels to axes and below chart</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Calendar week"</span>, y <span class="op">=</span> <span class="st">"CFR [95% CI]"</span>, </span>
<span>       subtitle <span class="op">=</span> <span class="st">"Case Fatality Ratio [95% CI] Among Inpatients"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># change visuals of dates and remove legend title</span></span>
<span>  <span class="va">epicurve_theme</span> <span class="op">+</span> </span>
<span>  <span class="fu">scale_x_date</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"3 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b %Y"</span><span class="op">)</span></span></code></pre></div>
<p>To create a combination visualisation, we must adjust some final
setting for the x-axes.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">no_x</span> <span class="op">&lt;-</span> <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>              axis.title.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And finally we plot the Epidemic Curve, the AR plot, and the CFR plot
all over each other.</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## use patchwork to stack the three plots on top of one another</span></span>
<span><span class="op">(</span><span class="va">basic_curve</span> <span class="op">+</span> <span class="va">no_x</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">ar_plot</span> <span class="op">+</span> <span class="va">no_x</span><span class="op">)</span> <span class="op">/</span> <span class="va">cfr_plot</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-57-1.png" width="768"></p>
</div>
<div class="section level4">
<h4 id="admissions-and-exits">Admissions and exits<a class="anchor" aria-label="anchor" href="#admissions-and-exits"></a>
</h4>
<p>The final two tables print the admissions and exits by epidemic week,
using code previously described.</p>
</div>
</div>
<div class="section level3">
<h3 id="place">Place<a class="anchor" aria-label="anchor" href="#place"></a>
</h3>
<p>The final section of the template produces tabular analysis outputs
related to <em>place</em>. If you have shapefiles for your situation,
you can also produce maps.</p>
<div class="section level4">
<h4 id="tabular-place-analyses-non-maps">Tabular place analyses (non-maps)<a class="anchor" aria-label="anchor" href="#tabular-place-analyses-non-maps"></a>
</h4>
<p>To get a basic <strong>descriptive table of cases by region</strong>
(which in our case was originally the variable <em>quartier</em> from
the raw linelist), we use <code>tbl_cross()</code> function from
{gtsummary} on the columns <code>patient_origin</code> and
<code>patient_facility_type</code> (inpatient, outpatient, or
missing).</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">tbl_cross</span><span class="op">(</span></span>
<span>    row <span class="op">=</span> <span class="va">patient_origin</span>, </span>
<span>    col <span class="op">=</span> <span class="va">patient_facility_type</span>, </span>
<span>    percent <span class="op">=</span> <span class="st">"column"</span>, </span>
<span>    label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>patient_origin <span class="op">=</span> <span class="st">"Region"</span>, </span>
<span>                 patient_facility_type <span class="op">=</span> <span class="st">"Facility type"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## make variable names bold </span></span>
<span>  <span class="fu">bold_labels</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># change to flextable format</span></span>
<span>  <span class="fu">as_flex_table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span></span></code></pre></div>
<template id="0836c39f-19ed-4da8-95ac-780c7b3a4a46"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-96a96d32{table-layout:auto;width:0%;}.cl-969487b4{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-969487c8{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9694b248{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9694b25c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9694b266{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9694b270{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9694b27a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-969779ec{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a00{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a0a{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a14{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a15{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a1e{background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a28{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a29{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a32{background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a46{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a47{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a50{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a5a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a5b{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96977a64{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-96a96d32">
<thead>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a46"><p class="cl-9694b248"><span class="cl-969487b4"> </span></p></td>
<td colspan="3" class="cl-96977a50"><p class="cl-9694b25c"><span class="cl-969487b4">Facility type</span></p></td>
<td class="cl-96977a47"><p class="cl-9694b25c"><span class="cl-969487b4"> </span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a64"><p class="cl-9694b248"><span class="cl-969487b4"></span></p></td>
<td class="cl-96977a5b"><p class="cl-9694b25c"><span class="cl-969487b4">Inpatient</span></p></td>
<td class="cl-96977a5a"><p class="cl-9694b25c"><span class="cl-969487b4">Outpatient</span></p></td>
<td class="cl-96977a5b"><p class="cl-9694b25c"><span class="cl-969487b4">Unknown</span></p></td>
<td class="cl-96977a5a"><p class="cl-9694b25c"><span class="cl-969487b4">Total</span></p></td>
</tr>
</thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a00"><p class="cl-9694b266"><span class="cl-969487b4">Region</span></p></td>
<td class="cl-96977a0a"><p class="cl-9694b270"><span class="cl-969487c8"></span></p></td>
<td class="cl-969779ec"><p class="cl-9694b270"><span class="cl-969487c8"></span></p></td>
<td class="cl-96977a0a"><p class="cl-9694b270"><span class="cl-969487c8"></span></p></td>
<td class="cl-969779ec"><p class="cl-9694b270"><span class="cl-969487c8"></span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ABLELAYE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (2.0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">4 (0.7%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ADAMRE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">10 (2.0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (2.0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">13 (2.1%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AFFOUSSE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AL-FRECHE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AL-HOUGNA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">9 (1.8%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">3 (6.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">12 (2.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AL-MOURA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AL ALAK</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AL MIDODIL</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ALBAYADI</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ALBOUKHASS</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">4 (0.8%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (4.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">6 (1.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ALKASSÉ</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">3 (5.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">11 (2.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (4.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">16 (2.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AM-DOUMA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AM BADARO 1</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AMBARITE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.4%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (2.0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AMCHOKA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AMDJALAT</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.4%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">AMSINENE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.6%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">4 (0.7%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ANALA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.4%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (4.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">6 (1.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ANFANDOCK</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">4 (6.8%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">18 (3.6%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">22 (3.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ANGUITEI</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (2.0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ARDO</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ATOUA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">BADINA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">BIR TAGAL</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">COMMERCANT</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.6%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">COUBO ABNIMIR</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">DARASALAM</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">19 (3.8%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (4.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">21 (3.4%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">DELEBAE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">DIFFIR</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">DIJEKHINÉ</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">DILEMA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">3 (5.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">13 (2.6%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">4 (8.2%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">20 (3.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">DINGUESS</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.4%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (2.0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">4 (0.7%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">DJAMBALBAHAR</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">7 (1.4%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">7 (1.1%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GANATIR</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">3 (5.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">85 (17%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">7 (14%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">95 (15%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GANATIR 1</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GANATIR 2</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">5 (1.0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">5 (0.8%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GARDOLE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GOURMOUDAY</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GOZ-TAMADJA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GOZ DJARAT</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GOZ MABILE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.6%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">4 (0.7%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">GOZ MABILE 2</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">4 (0.8%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (2.0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">6 (1.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">HILE BARA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">11 (2.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">13 (2.1%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">HILE ODAA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">HIMEDA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">IDETER</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">KACHKACHA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">MATAR</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.4%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">MINA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">2 (0.4%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (4.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">6 (1.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">MIRÉKIKE</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">MIRER</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">PEDIS</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">RASSALFIL</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (3.4%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">4 (0.8%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">6 (1.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">RIAD</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">29 (5.7%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">30 (4.9%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">RIDINA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">59 (12%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">4 (8.2%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">63 (10%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">RIDINA 1</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">RIDINA 2</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.6%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (4.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">5 (0.8%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">SALAMAT</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">19 (3.8%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (4.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">22 (3.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">SIHEBA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">1 (0.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">TARADONA</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">106 (21%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">4 (8.2%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">111 (18%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">TARADONA 1</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">9 (1.8%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">2 (4.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">12 (2.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">TARADONA 2</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">5 (8.5%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">25 (4.9%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (2.0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">31 (5.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">TARADONA 3</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">6 (1.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">3 (6.1%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">9 (1.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">ZONGO</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.6%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">0 (0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">3 (0.5%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a14"><p class="cl-9694b27a"><span class="cl-969487c8">Unknown</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (1.7%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">6 (1.2%)</span></p></td>
<td class="cl-96977a1e"><p class="cl-9694b270"><span class="cl-969487c8">1 (2.0%)</span></p></td>
<td class="cl-96977a15"><p class="cl-9694b270"><span class="cl-969487c8">8 (1.3%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96977a28"><p class="cl-9694b266"><span class="cl-969487b4">Total</span></p></td>
<td class="cl-96977a29"><p class="cl-9694b270"><span class="cl-969487c8">59 (100%)</span></p></td>
<td class="cl-96977a32"><p class="cl-9694b270"><span class="cl-969487c8">506 (100%)</span></p></td>
<td class="cl-96977a29"><p class="cl-9694b270"><span class="cl-969487c8">49 (100%)</span></p></td>
<td class="cl-96977a32"><p class="cl-9694b270"><span class="cl-969487c8">614 (100%)</span></p></td>
</tr>
</tbody>
</table>
</div></template><div class="flextable-shadow-host" id="a1d96313-9aef-4cf8-882f-af0e5015cfe4"></div>
<script>
var dest = document.getElementById("a1d96313-9aef-4cf8-882f-af0e5015cfe4");
var template = document.getElementById("0836c39f-19ed-4da8-95ac-780c7b3a4a46");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>A table of attack rates by region may be useful, and is produced in
the chunk <code>attack_rate_by_region</code>.</p>
<p><strong>First</strong>, like when we calculated attack rate by
epiweek in the <code>time_analysis</code> section, the cases are counted
by <code>patient_origin</code>. This list of counts is then
<strong>joined</strong> to the imported population data for each region
<strong>by <code>patient_origin</code> (the name of the
region/quartier)</strong>. These data are stored in the object
<code>cases</code>.</p>
<p><em>Recall that this join requires exact matches</em> between
<code>patient_origin</code> values in
<code>linelist_cleaned$patient_origin</code> and
<code>population_data_region$patient_origin</code> to match a region’s
cases to its population. In the data cleaning steps we converted the
values in <code>linelist_cleaned</code> to all capital letters to match
those in <code>population_data_region</code>.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># count cases by region</span></span>
<span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">patient_origin</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># add in population data</span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">population_data_region</span>, by <span class="op">=</span> <span class="st">"patient_origin"</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="co"># calculate attack rate for region</span></span>
<span><span class="va">ar_region</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epikit-exports.html">attack_rate</a></span><span class="op">(</span><span class="va">cases</span><span class="op">$</span><span class="va">n</span>, <span class="va">cases</span><span class="op">$</span><span class="va">population</span>, multiplier <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># add the region column to table</span></span>
<span>  <span class="fu">bind_cols</span><span class="op">(</span><span class="fu">select</span><span class="op">(</span><span class="va">cases</span>, <span class="va">patient_origin</span><span class="op">)</span>, <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">rename</span><span class="op">(</span><span class="st">"Region"</span> <span class="op">=</span> <span class="va">patient_origin</span>, </span>
<span>         <span class="st">"Cases (n)"</span> <span class="op">=</span> <span class="va">cases</span>, </span>
<span>         <span class="st">"Population"</span> <span class="op">=</span> <span class="va">population</span>, </span>
<span>         <span class="st">"AR (per 10,000)"</span> <span class="op">=</span> <span class="va">ar</span>, </span>
<span>         <span class="st">"Lower 95%CI"</span> <span class="op">=</span> <span class="va">lower</span>,</span>
<span>         <span class="st">"Upper 95%CI"</span> <span class="op">=</span> <span class="va">upper</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">ar_region</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/epikit-exports.html">merge_ci_df</a></span><span class="op">(</span>e <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># merge lower and upper CI in to one column </span></span>
<span>  <span class="fu">rename</span><span class="op">(</span><span class="st">"95%CI"</span> <span class="op">=</span> <span class="va">ci</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># rename single 95%CI column</span></span>
<span>  <span class="co"># produce styled output table with auto-adjusted column widths with {flextable}</span></span>
<span>  <span class="fu">qflextable</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make header text bold (using {flextable})</span></span>
<span>  <span class="fu">bold</span><span class="op">(</span>part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># make your table fit to the maximum width of the word document</span></span>
<span>  <span class="fu">set_table_properties</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"autofit"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co">## set to only show 1 decimal place </span></span>
<span>  <span class="fu">colformat_double</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<template id="5e11ead1-41a7-4575-b1fe-f4fa7cddd3e3"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-97129d48{table-layout:auto;width:0%;}.cl-96fd30de{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-96fd30f2{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-96fd571c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-96fd5730{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-96fe5194{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51a8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51b2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51b3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51bc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51c6{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51d0{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51d1{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51da{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51e4{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51e5{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51ee{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51f8{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe51f9{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-96fe5202{background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-97129d48">
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-96fe51f8"><p class="cl-96fd571c"><span class="cl-96fd30de">Region</span></p></td>
<td class="cl-96fe51f9"><p class="cl-96fd5730"><span class="cl-96fd30de">Cases (n)</span></p></td>
<td class="cl-96fe5202"><p class="cl-96fd5730"><span class="cl-96fd30de">Population</span></p></td>
<td class="cl-96fe51ee"><p class="cl-96fd5730"><span class="cl-96fd30de">AR (per 10,000)</span></p></td>
<td class="cl-96fe51e5"><p class="cl-96fd571c"><span class="cl-96fd30de">95%CI</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ABLELAYE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">4</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ADAMRE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">13</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AFFOUSSE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">2</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AL-FRECHE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AL-HOUGNA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">12</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AL-MOURA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AL ALAK</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AL MIDODIL</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ALBAYADI</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ALBOUKHASS</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">6</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ALKASSÉ</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">16</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AM-DOUMA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AM BADARO 1</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AMBARITE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">3</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AMCHOKA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AMDJALAT</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">2</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">AMSINENE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">4</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ANALA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">6</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ANFANDOCK</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">22</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ANGUITEI</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ARDO</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">3</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ATOUA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">2</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">BADINA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">BIR TAGAL</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">COMMERCANT</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">3</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">COUBO ABNIMIR</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">DARASALAM</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">21</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">DELEBAE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">2</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">DIFFIR</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">3</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">DIJEKHINÉ</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">DILEMA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">20</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">DINGUESS</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">4</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">2,268.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">17.6</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(6.86--45.26)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">DJAMBALBAHAR</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">7</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GANATIR</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">95</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GANATIR 1</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GANATIR 2</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">5</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GARDOLE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">2,286.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">4.4</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(0.77--24.74)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GOURMOUDAY</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GOZ-TAMADJA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GOZ DJARAT</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GOZ MABILE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">4</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">GOZ MABILE 2</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">6</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">3,086.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">19.4</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(8.91--42.36)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">HILE BARA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">13</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">HILE ODAA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">HIMEDA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">IDETER</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">KACHKACHA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">2</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">MATAR</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">2</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">569.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">35.1</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(9.64--127.24)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">MINA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">6</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">MIRÉKIKE</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">MIRER</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">PEDIS</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">RASSALFIL</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">6</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">RIAD</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">30</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">6,073.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">49.4</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(34.63--70.43)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">RIDINA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">63</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">RIDINA 1</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">2,336.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">4.3</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(0.76--24.21)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">RIDINA 2</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">5</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">3,734.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">13.4</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(5.72--31.31)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">SALAMAT</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">22</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">SIHEBA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">1</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">TARADONA</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">111</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">TARADONA 1</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">12</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">6,484.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">18.5</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(10.59--32.32)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">TARADONA 2</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">31</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">5,250.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">59.0</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(41.63--83.69)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">TARADONA 3</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">9</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">5,416.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">16.6</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(8.75--31.55)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe5194"><p class="cl-96fd571c"><span class="cl-96fd30f2">ZONGO</span></p></td>
<td class="cl-96fe51bc"><p class="cl-96fd5730"><span class="cl-96fd30f2">3</span></p></td>
<td class="cl-96fe51b2"><p class="cl-96fd5730"><span class="cl-96fd30f2">1,607.0</span></p></td>
<td class="cl-96fe51a8"><p class="cl-96fd5730"><span class="cl-96fd30f2">18.7</span></p></td>
<td class="cl-96fe51b3"><p class="cl-96fd571c"><span class="cl-96fd30f2">(6.35--54.74)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-96fe51e4"><p class="cl-96fd571c"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51d0"><p class="cl-96fd5730"><span class="cl-96fd30f2">8</span></p></td>
<td class="cl-96fe51da"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51c6"><p class="cl-96fd5730"><span class="cl-96fd30f2"></span></p></td>
<td class="cl-96fe51d1"><p class="cl-96fd571c"><span class="cl-96fd30f2">(NA--NA)</span></p></td>
</tr>
</tbody>
</table>
</div></template><div class="flextable-shadow-host" id="50060790-55de-4ea6-9884-19bc42b93d9c"></div>
<script>
var dest = document.getElementById("50060790-55de-4ea6-9884-19bc42b93d9c");
var template = document.getElementById("5e11ead1-41a7-4575-b1fe-f4fa7cddd3e3");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>You could then also plot this on a bar chart with confidence
intervals.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ar_region</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">drop_na</span><span class="op">(</span><span class="va">`AR (per 10,000)`</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">Region</span>, <span class="va">`AR (per 10,000)`</span><span class="op">)</span>,</span>
<span>               y <span class="op">=</span> <span class="va">`AR (per 10,000)`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># plot as bars (identity = as is)</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, col <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># add CIs</span></span>
<span>  <span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">`Lower 95%CI`</span>, ymax <span class="op">=</span> <span class="va">`Upper 95%CI`</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># set origin for axes</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="co"># add labels to axes and below chart</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Region"</span>, y <span class="op">=</span> <span class="st">"AR (per 10,000)"</span>, </span>
<span>       captions <span class="op">=</span> <span class="fu">str_glue</span><span class="op">(</span><span class="st">"Source: MSF data from {reporting_week}"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="va">epicurve_theme</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-58-1.png" width="768"></p>
<p>Note that there were many quartiers without population denominators
that make the graph difficult to read. Thus, **we modified the code by
filtering <code>ar_region</code> with <code>drop_na()</code> to remove
these. Now any quartiers with missing denominators will not appear in
the graph.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter ar for non-zero quartiers</span></span>
<span><span class="va">ar_region</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ar_region</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">`AR (per 10,000)`</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot with the region on the x axis sorted by increasing ar</span></span>
<span><span class="co"># ar value on the y axis </span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">ar_region</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">Region</span>, <span class="va">`AR (per 10,000)`</span><span class="op">)</span>,</span>
<span>               y <span class="op">=</span> <span class="va">`AR (per 10,000)`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, col <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># plot as bars (identity = as is)</span></span>
<span>  <span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">`Lower 95%CI`</span>, ymax <span class="op">=</span> <span class="va">`Upper 95%CI`</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span> <span class="co"># add CIs</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># set origin for axes</span></span>
<span>  <span class="co"># add labels to axes and below chart</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Region"</span>, y <span class="op">=</span> <span class="st">"AR (per 10,000)"</span>, </span>
<span>       captions <span class="op">=</span> <span class="fu">str_glue</span><span class="op">(</span><span class="st">"Source: MSF data from {reporting_week}"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="va">epicurve_theme</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/bar_attack_rate_by_region-1.png" width="768"></p>
<p>A similar analysis can be done to show mortality rates (be sure to
use <code>exit_status2</code>!)</p>
</div>
<div class="section level4">
<h4 id="maps">Maps<a class="anchor" aria-label="anchor" href="#maps"></a>
</h4>
<p>Mapping in R can be intimidating at first because it is different
than ArcGIS, QGIS, or other mapping software that primarily use a
point-and-click interface. However, you will see that using commands to
create maps can be much faster, more replicable, and transparent for
whomever you share code with.</p>
<p>*Shapefiles are a format for storing geometric location and attribute
data for geographic features - for example **either points (e.g. GPS
points of cases or households surveyed), lines (e.g. road network), or
polygons (e.g. district boundaries)*</p>
<p>We do have shapefiles for the Am Timan exercise. The shapefile for
the quartiers is accessible from within the {sitrep} R package by
running the following command:</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># saves shapefile stored in R package as "map"</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="va">shape_quartier_internal</span></span></code></pre></div>
<p>A shapefile is actually made of several files. Viewing the shapefile
in your computer’s internal folders you will often see 4 or 5 files with
the same name but different extensions (e.g. .shp, .prj, etc.). As long
as these files are located in the same folder the shapefile will load
correctly when you import with the .shp extension.</p>
<p>Because we have shapefiles for this exercise, we <strong>must delete
the command that generates the fake shapefile</strong></p>
<p><code>map &lt;- gen_polygon(regions = unique(linelist_cleaned$patient_origin))</code></p>
<p>Note the checklist for using shapefiles:</p>
<ul>
<li>Your shapefile can be a polygon or points (polygons do not have to
be contiguous - they do not have to touch each other)<br>
</li>
<li>Ensure that the region names in the shapefile match <em>exactly</em>
the region names in <code>linelist_cleaned</code> (in most shapefiles
there is an ID or NAME variable in the spreadsheet file)<br>
</li>
<li>Make sure the coordinate reference system (CRS) of the shapefile is
WGS84 (this is the standard coordinate system used by most GPS systems,
but it is good to ask whomever collected to data to be sure)</li>
</ul>
<p>When giving the name of a shapefile to <code>here()</code>, list the
file name with a .shp extension.</p>
<p>A generic example of importing a shapefile might look like this:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## reading in a shapefile </span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu">read_sf</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"my_map_folder"</span>, <span class="st">"Quartiersshape.shp"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The next code will check the coordinate reference system (CRS) of the
shapefile, as it was read-in. In our exercise, we see an EPSG code of
4326, which is the correct code for WGS84 (you can also see below the
EPSG code that the datum is WGS84).</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## check the coordinate reference system (CRS)</span></span>
<span><span class="fu">st_crs</span><span class="op">(</span><span class="va">map</span><span class="op">)</span></span>
<span><span class="co">#&gt; Coordinate Reference System:</span></span>
<span><span class="co">#&gt;   User input: WGS 84 </span></span>
<span><span class="co">#&gt;   wkt:</span></span>
<span><span class="co">#&gt; GEOGCRS["WGS 84",</span></span>
<span><span class="co">#&gt;     DATUM["World Geodetic System 1984",</span></span>
<span><span class="co">#&gt;         ELLIPSOID["WGS 84",6378137,298.257223563,</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1]]],</span></span>
<span><span class="co">#&gt;     PRIMEM["Greenwich",0,</span></span>
<span><span class="co">#&gt;         ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">#&gt;     CS[ellipsoidal,2],</span></span>
<span><span class="co">#&gt;         AXIS["latitude",north,</span></span>
<span><span class="co">#&gt;             ORDER[1],</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">#&gt;         AXIS["longitude",east,</span></span>
<span><span class="co">#&gt;             ORDER[2],</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">#&gt;     ID["EPSG",4326]]</span></span></code></pre></div>
<p>If there is no CRS specified for your shapefile, you can set the CRS
to WGS84 with the following command, which uses the EPSG code of
4326.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## set the CRS if not present using EPSG value</span></span>
<span><span class="co">## this is the most commonly used </span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu">st_set_crs</span><span class="op">(</span><span class="va">map</span>, value <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span> <span class="co"># Sets to WGS84</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="attack-rate-map">Attack rate map<a class="anchor" aria-label="anchor" href="#attack-rate-map"></a>
</h4>
<p>These commands reference the <code>ar_region</code> table prepared in
previous sections of the report, which contains region names, number of
cases, populaton AR, and 95%CI.</p>
<div class="section level5">
<h5 id="create-categories-of-ars-by-region">Create categories of ARs by region<a class="anchor" aria-label="anchor" href="#create-categories-of-ars-by-region"></a>
</h5>
<p><strong>Create a <em>categorical</em> variable of the attack
rate.</strong> These categories will appear in the map as the legend -
and the regions will be colored by these groups.</p>
<ol style="list-style-type: decimal">
<li><p>The first command defines <code>max_ar</code> as the highest
attack rate value in the object <code>ar_region</code>. This is
referenced later.</p></li>
<li><p>In the next command, <code>breakers</code> is defined as a
sequence of integers. Zero is included by default because it should be a
separate color on the final map. After zero, quartiles are determined up
to the <code>max_ar</code> using the {sitrep} function
<code><a href="../reference/epikit-exports.html">find_breaks()</a></code>.</p></li>
<li><p>In the last command, <code>mutate()</code> is used to make
<code>ar_map</code> (a copy <code>ar_region</code>), and add the
<code>categories</code> variable. This variable is created using
<code>breakers</code> to define the breaks in the numeric variable
<code>AR (per 10,000)</code>.</p></li>
</ol>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save the maximum AR in the ar_region table</span></span>
<span><span class="va">max_ar</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">ar_region</span><span class="op">$</span><span class="va">`Upper 95%CI`</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create groups - one group will be 0 only, then up to 4 more groups evenly</span></span>
<span><span class="co"># divided to maximum</span></span>
<span><span class="va">breakers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>                         <span class="co"># include zero as a standalone group</span></span>
<span>                         <span class="fl">0</span>, </span>
<span>                         <span class="co"># 1 to 4 divisions, snapping the boundaries to the nearest 100</span></span>
<span>                         <span class="fu"><a href="../reference/epikit-exports.html">find_breaks</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">max_ar</span>, breaks <span class="op">=</span> <span class="fl">4</span>, snap <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span>             <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## create a categorical variable using the age_categories function </span></span>
<span><span class="co">## (we aren't using ages - but it functions the same way!)</span></span>
<span><span class="va">ar_map</span> <span class="op">&lt;-</span> <span class="fu">mutate</span><span class="op">(</span><span class="va">ar_region</span>, </span>
<span>             categories <span class="op">=</span> <span class="fu"><a href="../reference/epikit-exports.html">age_categories</a></span><span class="op">(</span><span class="va">`AR (per 10,000)`</span>, </span>
<span>                                         breakers <span class="op">=</span> <span class="va">breakers</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="join-the-table-to-the-shapefile">Join the table to the shapefile<a class="anchor" aria-label="anchor" href="#join-the-table-to-the-shapefile"></a>
</h5>
<p><strong>Join the object <code>map</code> (shapefile) to
<code>ar_map</code> (a data frame)</strong>. The spatial object
<code>map</code> is joined to the data frame <code>ar_map</code> with a
<strong>left join</strong>. Both of these objects contain tables (you
can click them in the Environment pane to see this). In the command,
they are linked by the <code>Name</code> variable in <code>ar</code> and
the <code>Region</code> variable in <code>map</code>.</p>
<p><strong>You may need to modify your code so that the join occurs on
<code>Name</code> in the object <code>map</code>, and not
<code>name</code>.</strong></p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Join table to shapefile -----------------------------------------------------</span></span>
<span><span class="va">mapsub</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">map</span>, <span class="va">ar_map</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Name"</span> <span class="op">=</span> <span class="st">"Region"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Make sure you modify your <code>left_join</code> code to use “Name”
with a capital N, as that is how the variable is spelled in the object
‘map’. In your other data these variable names may be completely
different and must be changed</p>
<p>The resulting object <code>mapsub</code> is a product of this
<strong>left join</strong>. A left join will include all values from the
Left-hand Side (LHS) and only include values from the Right-hand Side
(RHS) if they match to LHS values. Now, the attack rates are joined to
the region names and to their GIS geometries. You can verify this by
Viewing the object <code>mapsub</code> (click on it in the Environment
pane).</p>
</div>
<div class="section level5">
<h5 id="plot-cases-or-ar-by-region">Plot cases or AR by region<a class="anchor" aria-label="anchor" href="#plot-cases-or-ar-by-region"></a>
</h5>
<p><strong>Now, <code>ggplot()</code> is used to create the
map.</strong> Remember that <code>ggplot()</code> subcommands must be
connected by plus symbols at the end of each line (<code>+</code>)
(except the last line). Read more about ggplot2 and
<code>ggplot()</code> in the Advanced R Basics page.</p>
<p><strong><code>geom_sf()</code></strong> identifies
<code>mapsub</code> as providing the data for the map, and filling the
polygons by values in the variable <code>categories</code>.</p>
<p><strong><code>coord_sf()</code></strong> set to <code>NA</code>
prevents gridlines from being drawn on the map.</p>
<p><strong><code>annotation_scale()</code></strong> adds a scalebar at
the bottom of the map.</p>
<p><strong><code>scale_fill_brewer()</code></strong> uses a color
palatte from orange to red (“OrRd”), keeps all color levels even if
there are no polygons at that level (<code>drop=FALSE</code>), and
specifies a title for the legend. If you want a different color scale,
use this code from the package <strong>RColorBrewer</strong> to see the
possible options (hint: after running this code click “Zoom” in your
Plot/Viewer pane to see more clearly). Then replace “OrRd” with your
desired code. You can read more about colors <a href="http://www.sthda.com/english/wiki/print.php?id=85" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RColorBrewer</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">display.brewer.all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-64-1.png" width="576"></p>
<p><strong><code>geom_sf_text()</code></strong> specifies labels for the
polygons, including which variable to use for labels
(<code>Name</code>), and the text colour. <strong>Again, we need to
modify this <code>ggplot()</code> reference to the variable “name” to
now reference “Name” with a capital N. In your other data the variable
may be completely different.</strong></p>
<p><strong><code>theme_void()</code></strong> specifies a theme for the
map that does not include coordinates or axes.</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## you could also fill by cases using `Cases (n)` in the fill option instead of `AR (per 10,000)`</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># shapefile as polygon</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mapsub</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">categories</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># needed to avoid gridlines being drawn</span></span>
<span>  <span class="fu">coord_sf</span><span class="op">(</span>datum <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># add a scalebar</span></span>
<span>  <span class="fu">annotation_scale</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># color the scale to be perceptually uniform </span></span>
<span>  <span class="co"># drop FALSE keeps all levels </span></span>
<span>  <span class="co"># name allows you to change the legend title </span></span>
<span>  <span class="fu">scale_fill_brewer</span><span class="op">(</span>drop <span class="op">=</span> <span class="cn">FALSE</span>, palette <span class="op">=</span> <span class="st">"OrRd"</span>, name <span class="op">=</span> <span class="st">"AR (per 10,000)"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># label polygons</span></span>
<span>  <span class="fu">geom_sf_text</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mapsub</span>, <span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">Name</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"grey50"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># remove coordinates and axes</span></span>
<span>  <span class="fu">theme_void</span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-65-1.png" width="768"></p>
<p><strong>You can use this alternative to make the labels not
overlap.</strong></p>
<p><strong><code>ggrepel()</code></strong> arranges point/polygon labels
so they do not overlap and are easier to read. You can see more examples
of <code>ggrepel()</code> <a href="https://mran.microsoft.com/snapshot/2017-08-20/web/packages/ggrepel/vignettes/ggrepel.html" class="external-link">in
this vignette</a></p>
<p>The <code>geom_sf_text()</code> line has been replaced by
ggrepel.</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## plotting with polygons ------------------------------------------------------</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mapsub</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">categories</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># shapefile as polygon</span></span>
<span>  <span class="fu">coord_sf</span><span class="op">(</span>datum <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span> <span class="co"># needed to avoid gridlines being drawn</span></span>
<span>  <span class="fu">annotation_scale</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="co"># add a scalebar</span></span>
<span>  <span class="fu">scale_fill_brewer</span><span class="op">(</span>drop <span class="op">=</span> <span class="cn">FALSE</span>, palette <span class="op">=</span> <span class="st">"OrRd"</span>, name <span class="op">=</span> <span class="st">"AR (per 10,000)"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="co"># Optional ggrepel section to make labels appear more nicely</span></span>
<span>  <span class="fu">ggrepel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html" class="external-link">geom_label_repel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mapsub</span>, <span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">Name</span>, geometry <span class="op">=</span> <span class="va">geometry</span><span class="op">)</span>, </span>
<span>                            stat <span class="op">=</span> <span class="st">"sf_coordinates"</span>, </span>
<span>                            min.segment.length <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span></span>
<span>  <span class="fu">theme_void</span><span class="op">(</span><span class="op">)</span>  <span class="co"># remove coordinates and axes</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-66-1.png" width="768"></p>
</div>
</div>
<div class="section level4">
<h4 id="map-iteration">Map iteration<a class="anchor" aria-label="anchor" href="#map-iteration"></a>
</h4>
<p>Lastly, <strong>there is an efficient way to create attack rate maps
and bar plots of incidence for each epiweek</strong>. In this case, we
want to make the map and bar chart for each region. You can read more
about iteration in the Epidemiologist R Handbook chapter <a href="https://epirhandbook.com/en/iteration-loops-and-lists.html" class="external-link">Iteration,
Loops, and Lists</a>.</p>
<p>A few things to note about this chunk:</p>
<ul>
<li>The first half is very similar to the set-up of the previous
map.<br>
</li>
<li>You must also modify the <code>left_join</code> command to list the
correct variable names (e.g. <strong>modify to join on <code>Name</code>
instead of <code>name</code></strong>)</li>
<li>These maps are not labeled with region names.<br>
</li>
<li>The creation of the barplots depends on the object
<code>epicurve_theme</code>, which was defined in the Time section of
the template. If that section is not created, then this object will be
missing and cause errors.</li>
</ul>
<p>First we run preparation code that should look very familiar to the
steps above.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Prepare data ---------------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># change region variable to a factor so that zero counts can be included</span></span>
<span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">patient_origin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">linelist_cleaned</span><span class="op">$</span><span class="va">patient_origin</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># case counts</span></span>
<span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">epiweek</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">patient_origin</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span>   <span class="co"># cases for each week by region</span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">population_data_region</span>, by <span class="op">=</span> <span class="st">"patient_origin"</span><span class="op">)</span>    <span class="co"># merge population data </span></span>
<span></span>
<span></span>
<span><span class="co"># attack rate for region</span></span>
<span><span class="va">ar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epikit-exports.html">attack_rate</a></span><span class="op">(</span><span class="va">cases</span><span class="op">$</span><span class="va">n</span>, <span class="va">cases</span><span class="op">$</span><span class="va">population</span>, multiplier <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># add the region column to table</span></span>
<span>  <span class="fu">bind_cols</span><span class="op">(</span><span class="fu">select</span><span class="op">(</span><span class="va">cases</span>, <span class="va">epiweek</span>, <span class="va">patient_origin</span><span class="op">)</span>, <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">rename</span><span class="op">(</span><span class="st">"Region"</span> <span class="op">=</span> <span class="va">patient_origin</span>, </span>
<span>         <span class="st">"Cases (n)"</span> <span class="op">=</span> <span class="va">cases</span>, </span>
<span>         <span class="st">"Population"</span> <span class="op">=</span> <span class="va">population</span>, </span>
<span>         <span class="st">"AR (per 10,000)"</span> <span class="op">=</span> <span class="va">ar</span>, </span>
<span>         <span class="st">"Lower 95%CI"</span> <span class="op">=</span> <span class="va">lower</span>,</span>
<span>         <span class="st">"Upper 95%CI"</span> <span class="op">=</span> <span class="va">upper</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## define the last 10 weeks available in your dataset</span></span>
<span><span class="va">which_weeks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">cases</span><span class="op">$</span><span class="va">epiweek</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## only keep the last four weeks of data </span></span>
<span><span class="va">ar</span> <span class="op">&lt;-</span> <span class="va">ar</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">epiweek</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">which_weeks</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># define the maximum number of cases / max AR for the color palette </span></span>
<span><span class="va">max_cases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">cases</span><span class="op">$</span><span class="va">n</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span><span class="va">max_ar</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">ar</span><span class="op">$</span><span class="va">`Upper 95%CI`</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># define breaks for standardising color palette</span></span>
<span><span class="va">breakers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="co"># include zero as a standalone group</span></span>
<span>             <span class="fu"><a href="../reference/epikit-exports.html">find_breaks</a></span><span class="op">(</span><span class="va">max_ar</span>, breaks <span class="op">=</span> <span class="fl">4</span>, snap <span class="op">=</span> <span class="fl">25</span><span class="op">)</span> <span class="co"># four breaks rounded to nearest 25</span></span>
<span>             <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># add a categorical variable for AR</span></span>
<span><span class="co"># (replace with `Cases (n)` if you want to map cases)</span></span>
<span><span class="va">ar</span> <span class="op">&lt;-</span> <span class="fu">mutate</span><span class="op">(</span><span class="va">ar</span>, </span>
<span>             categories <span class="op">=</span> <span class="fu"><a href="../reference/epikit-exports.html">age_categories</a></span><span class="op">(</span><span class="va">`AR (per 10,000)`</span>, </span>
<span>                                         breakers <span class="op">=</span> <span class="va">breakers</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now, we can use the {purrr} package to <em>iterate</em> (repeat a
process many times). For each week in the final 10 weeks of the
outbreak, we left join the attack rate and the shapefile. Then we create
a map, create a barplot, and combine the two plots together.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># go through each epiweek, filter and plot the data</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span>.x <span class="op">=</span> <span class="va">which_weeks</span>, </span>
<span>           .f <span class="op">=</span> <span class="op">~</span><span class="op">{</span></span>
<span>  <span class="va">this_ar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ar</span>, <span class="va">epiweek</span> <span class="op">==</span> <span class="fu">yearweek</span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">## map </span></span>
<span>  <span class="va">mapsub</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">map</span>, <span class="va">this_ar</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Name"</span> <span class="op">=</span> <span class="st">"Region"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">## choropleth </span></span>
<span>  <span class="va">map_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">## shapefile as polygon</span></span>
<span>    <span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mapsub</span>, <span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">categories</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="co">## needed to avoid gridlines being drawn</span></span>
<span>    <span class="fu">coord_sf</span><span class="op">(</span>datum <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="co">## add a scalebar</span></span>
<span>    <span class="fu">annotation_scale</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="co">## color the scale to be perceptually uniform (keep levels)</span></span>
<span>    <span class="fu">scale_fill_brewer</span><span class="op">(</span>drop <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                    palette <span class="op">=</span> <span class="st">"OrRd"</span>, </span>
<span>                    name <span class="op">=</span> <span class="st">"AR (per 10,000)"</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>    <span class="co">## remove coordinates and axes</span></span>
<span>    <span class="fu">theme_void</span><span class="op">(</span><span class="op">)</span> </span>
<span>  </span>
<span>  </span>
<span>  <span class="co">## plot with the region on the x axis sorted by increasing ar</span></span>
<span>  <span class="co">## ar value on the y axis </span></span>
<span>  <span class="va">barplot</span> <span class="op">&lt;-</span> <span class="va">this_ar</span> <span class="op">%&gt;%</span></span>
<span>    <span class="co"># Filter values in this_ar to only show quartiers with attack rates &gt; 0 in barplot</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">`AR (per 10,000)`</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co"># make plot</span></span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">Region</span>, <span class="va">`AR (per 10,000)`</span><span class="op">)</span>,</span>
<span>                                 y <span class="op">=</span> <span class="va">`AR (per 10,000)`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="co">## plot as bars (identity = as is)</span></span>
<span>    <span class="fu">geom_col</span><span class="op">(</span>col <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>     <span class="co">## add CIs</span></span>
<span>    <span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">`Lower 95%CI`</span>, ymax <span class="op">=</span> <span class="va">`Upper 95%CI`</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">## set origin for axes</span></span>
<span>    <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">max_ar</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>    <span class="co">## add labels to axes and below chart</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Region"</span>, y <span class="op">=</span> <span class="st">"AR (per 10,000)"</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>    <span class="va">epicurve_theme</span></span>
<span>  </span>
<span>  </span>
<span>  </span>
<span>  <span class="co">## combine the barplot and map plot into one with patchwork and add a title</span></span>
<span>  <span class="co">## in the top-left corner and a caption in the bottom-right</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>    <span class="va">barplot</span> <span class="op">+</span> <span class="va">map_plot</span> <span class="op">+</span> <span class="fu">plot_annotation</span><span class="op">(</span></span>
<span>    title   <span class="op">=</span> <span class="fu">str_glue</span><span class="op">(</span><span class="st">"Epiweek: {.x}"</span><span class="op">)</span>,</span>
<span>    caption <span class="op">=</span> <span class="fu">str_glue</span><span class="op">(</span><span class="st">"Source: MSF data from {reporting_week}"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-1.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-2.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-3.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-4.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-5.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-6.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-7.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-8.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-9.png" width="768"><img src="Outbreaks_Walkthrough_files/figure-html/unnamed-chunk-67-10.png" width="768"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Alexander Spina, Zhian N. Kamvar, Dirk Schumacher, Kate Doyle, Chris Jarvis, Lukas Richter.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
